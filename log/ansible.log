2019-10-12 06:44:19,016 p=29115 u=root |  master | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 06:44:19,079 p=29115 u=root |  worker2 | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 06:44:19,358 p=29115 u=root |  worker1 | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 06:45:25,406 p=29194 u=root |  PLAY [all] ******************************************************************************
2019-10-12 06:45:25,415 p=29194 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:45:27,410 p=29194 u=root |  ok: [master]
2019-10-12 06:45:27,451 p=29194 u=root |  ok: [worker1]
2019-10-12 06:45:27,478 p=29194 u=root |  ok: [worker2]
2019-10-12 06:45:27,500 p=29194 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 06:45:27,533 p=29194 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:45:27,594 p=29194 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:45:27,669 p=29194 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:45:32,207 p=29194 u=root |  changed: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:45:32,210 p=29194 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 06:45:32,896 p=29194 u=root |  changed: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:45:33,064 p=29194 u=root |  changed: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:45:33,088 p=29194 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 06:45:34,867 p=29194 u=root |  changed: [master]
2019-10-12 06:45:34,873 p=29194 u=root |  changed: [worker1]
2019-10-12 06:45:34,904 p=29194 u=root |  changed: [worker2]
2019-10-12 06:45:34,925 p=29194 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 06:45:36,663 p=29194 u=root |   [ERROR]: User interrupted execution

2019-10-12 06:53:22,183 p=29499 u=root |  PLAY [all] ******************************************************************************
2019-10-12 06:53:22,192 p=29499 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:53:24,350 p=29499 u=root |  ok: [worker1]
2019-10-12 06:53:24,355 p=29499 u=root |  ok: [master]
2019-10-12 06:53:24,362 p=29499 u=root |  ok: [worker2]
2019-10-12 06:53:24,384 p=29499 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 06:53:24,414 p=29499 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:53:24,474 p=29499 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:53:24,544 p=29499 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:53:26,899 p=29499 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:53:26,902 p=29499 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 06:53:26,968 p=29499 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:53:27,022 p=29499 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:53:27,045 p=29499 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 06:53:28,414 p=29499 u=root |  ok: [master]
2019-10-12 06:53:28,433 p=29499 u=root |  ok: [worker1]
2019-10-12 06:53:28,526 p=29499 u=root |  ok: [worker2]
2019-10-12 06:53:28,547 p=29499 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 06:53:29,524 p=29499 u=root |  ok: [worker1]
2019-10-12 06:53:29,530 p=29499 u=root |  ok: [master]
2019-10-12 06:53:29,546 p=29499 u=root |  ok: [worker2]
2019-10-12 06:53:29,567 p=29499 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 06:53:51,811 p=29499 u=root |  changed: [master]
2019-10-12 06:53:55,849 p=29499 u=root |  changed: [worker1]
2019-10-12 06:53:56,269 p=29499 u=root |  changed: [worker2]
2019-10-12 06:53:56,289 p=29499 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 06:53:57,892 p=29499 u=root |  changed: [master]
2019-10-12 06:53:57,995 p=29499 u=root |  changed: [worker1]
2019-10-12 06:53:58,098 p=29499 u=root |  changed: [worker2]
2019-10-12 06:53:58,119 p=29499 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 06:54:03,910 p=29499 u=root |  changed: [master]
2019-10-12 06:54:04,287 p=29499 u=root |  changed: [worker1]
2019-10-12 06:54:05,145 p=29499 u=root |  changed: [worker2]
2019-10-12 06:54:05,166 p=29499 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 06:54:17,013 p=29499 u=root |  changed: [master]
2019-10-12 06:54:19,129 p=29499 u=root |  changed: [worker2]
2019-10-12 06:54:19,506 p=29499 u=root |  changed: [worker1]
2019-10-12 06:54:19,527 p=29499 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 06:54:28,258 p=29499 u=root |  changed: [master]
2019-10-12 06:54:29,554 p=29499 u=root |  changed: [worker1]
2019-10-12 06:54:30,670 p=29499 u=root |  changed: [worker2]
2019-10-12 06:54:30,680 p=29499 u=root |  PLAY [master] ***************************************************************************
2019-10-12 06:54:30,699 p=29499 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:54:31,482 p=29499 u=root |  ok: [master]
2019-10-12 06:54:31,504 p=29499 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 06:54:32,559 p=29499 u=root |  ok: [master]
2019-10-12 06:54:32,561 p=29499 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:54:32,563 p=29499 u=root |  master                     : ok=11   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:54:32,564 p=29499 u=root |  worker1                    : ok=9    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:54:32,564 p=29499 u=root |  worker2                    : ok=9    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:54:33,029 p=29984 u=root |  ERROR! Syntax Error while loading YAML.
  found character that cannot start any token

The error appears to be in '/root/kubernetes_with_kubeadm/creating_user.yml': line 6, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      user:
	name: kube
^ here
There appears to be a tab character at the start of the line.

YAML does not use tabs for formatting. Tabs should be replaced with spaces.

For example:
    - name: update tooling
      vars:
        version: 1.2.3
#    ^--- there is a tab there.

Should be written as:
    - name: update tooling
      vars:
        version: 1.2.3
# ^--- all spaces here.

2019-10-12 06:54:33,654 p=29988 u=root |  PLAY [master] ***************************************************************************
2019-10-12 06:54:33,662 p=29988 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:54:34,746 p=29988 u=root |  ok: [master]
2019-10-12 06:54:34,767 p=29988 u=root |  TASK [Add IP address of all hosts to all hosts] *****************************************
2019-10-12 06:54:35,236 p=29988 u=root |  changed: [master] => (item=worker1)
2019-10-12 06:54:35,508 p=29988 u=root |  changed: [master] => (item=worker2)
2019-10-12 06:54:35,822 p=29988 u=root |  changed: [master] => (item=master)
2019-10-12 06:54:35,846 p=29988 u=root |  TASK [Changing Hostname to master] ******************************************************
2019-10-12 06:54:36,306 p=29988 u=root |  changed: [master]
2019-10-12 06:54:36,329 p=29988 u=root |  TASK [Reboot immediately if there was a change in reboot_req.] **************************
2019-10-12 06:54:36,964 p=29988 u=root |  changed: [master]
2019-10-12 06:54:36,988 p=29988 u=root |  TASK [Wait for the reboot to complete if there was a change in reboot_req.] *************
2019-10-12 06:54:38,222 p=29988 u=root |   [ERROR]: User interrupted execution

2019-10-12 06:55:25,554 p=30091 u=root |  PLAY [all] ******************************************************************************
2019-10-12 06:55:25,561 p=30091 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:55:26,878 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:26,948 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:27,469 p=30091 u=root |  ok: [master]
2019-10-12 06:55:27,491 p=30091 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 06:55:27,523 p=30091 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:55:27,591 p=30091 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:55:27,669 p=30091 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 06:55:29,055 p=30091 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:55:29,058 p=30091 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 06:55:29,086 p=30091 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:55:29,113 p=30091 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 06:55:29,139 p=30091 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 06:55:30,632 p=30091 u=root |  ok: [master]
2019-10-12 06:55:30,706 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:30,886 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:30,909 p=30091 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 06:55:31,901 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:31,913 p=30091 u=root |  ok: [master]
2019-10-12 06:55:31,932 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:31,955 p=30091 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 06:55:34,341 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:34,633 p=30091 u=root |  ok: [master]
2019-10-12 06:55:34,711 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:34,734 p=30091 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 06:55:35,991 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:36,033 p=30091 u=root |  ok: [master]
2019-10-12 06:55:36,107 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:36,130 p=30091 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 06:55:36,841 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:36,908 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:36,926 p=30091 u=root |  ok: [master]
2019-10-12 06:55:36,950 p=30091 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 06:55:39,254 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:39,309 p=30091 u=root |  ok: [master]
2019-10-12 06:55:39,409 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:39,433 p=30091 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 06:55:40,582 p=30091 u=root |  ok: [worker1]
2019-10-12 06:55:40,699 p=30091 u=root |  ok: [master]
2019-10-12 06:55:40,861 p=30091 u=root |  ok: [worker2]
2019-10-12 06:55:40,870 p=30091 u=root |  PLAY [master] ***************************************************************************
2019-10-12 06:55:40,891 p=30091 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:55:41,677 p=30091 u=root |  ok: [master]
2019-10-12 06:55:41,698 p=30091 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 06:55:42,751 p=30091 u=root |  ok: [master]
2019-10-12 06:55:42,753 p=30091 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:55:42,754 p=30091 u=root |  master                     : ok=11   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:42,754 p=30091 u=root |  worker1                    : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:42,754 p=30091 u=root |  worker2                    : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:43,399 p=30567 u=root |  PLAY [all] ******************************************************************************
2019-10-12 06:55:43,407 p=30567 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:55:44,756 p=30567 u=root |  ok: [worker1]
2019-10-12 06:55:44,762 p=30567 u=root |  ok: [master]
2019-10-12 06:55:44,783 p=30567 u=root |  ok: [worker2]
2019-10-12 06:55:44,804 p=30567 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 06:55:45,721 p=30567 u=root |  changed: [master]
2019-10-12 06:55:45,735 p=30567 u=root |  changed: [worker1]
2019-10-12 06:55:45,742 p=30567 u=root |  changed: [worker2]
2019-10-12 06:55:45,764 p=30567 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 06:55:46,449 p=30567 u=root |  changed: [master]
2019-10-12 06:55:46,472 p=30567 u=root |  changed: [worker1]
2019-10-12 06:55:46,476 p=30567 u=root |  changed: [worker2]
2019-10-12 06:55:46,498 p=30567 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 06:55:47,389 p=30567 u=root |  changed: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 06:55:47,392 p=30567 u=root |  changed: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 06:55:47,405 p=30567 u=root |  changed: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 06:55:47,410 p=30567 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:55:47,410 p=30567 u=root |  master                     : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:47,411 p=30567 u=root |  worker1                    : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:47,411 p=30567 u=root |  worker2                    : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:55:48,064 p=30767 u=root |  PLAY [master] ***************************************************************************
2019-10-12 06:55:48,072 p=30767 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:55:49,153 p=30767 u=root |  ok: [master]
2019-10-12 06:55:49,173 p=30767 u=root |  TASK [Add IP address of all hosts to all hosts] *****************************************
2019-10-12 06:55:49,653 p=30767 u=root |  ok: [master] => (item=worker1)
2019-10-12 06:55:49,929 p=30767 u=root |  ok: [master] => (item=worker2)
2019-10-12 06:55:50,243 p=30767 u=root |  ok: [master] => (item=master)
2019-10-12 06:55:50,268 p=30767 u=root |  TASK [Changing Hostname to master] ******************************************************
2019-10-12 06:55:50,721 p=30767 u=root |  ok: [master]
2019-10-12 06:55:50,745 p=30767 u=root |  TASK [Reboot immediately if there was a change in reboot_req.] **************************
2019-10-12 06:55:50,765 p=30767 u=root |  skipping: [master]
2019-10-12 06:55:50,788 p=30767 u=root |  TASK [Wait for the reboot to complete if there was a change in reboot_req.] *************
2019-10-12 06:55:50,809 p=30767 u=root |  skipping: [master]
2019-10-12 06:55:50,833 p=30767 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 06:56:48,229 p=30767 u=root |  changed: [master]
2019-10-12 06:56:48,253 p=30767 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 06:56:48,752 p=30767 u=root |   [WARNING]: Module remote_tmp /home/kube/.ansible/tmp did not exist and was created with
a mode of 0700, this may cause issues when running as another user. To avoid this,
create the remote_tmp dir with the correct permissions manually

2019-10-12 06:56:48,754 p=30767 u=root |  changed: [master]
2019-10-12 06:56:48,778 p=30767 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 06:56:49,235 p=30767 u=root |  changed: [master]
2019-10-12 06:56:49,259 p=30767 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 06:56:52,157 p=30767 u=root |  changed: [master]
2019-10-12 06:56:52,180 p=30767 u=root |  TASK [download metrics-server and my repo] **********************************************
2019-10-12 06:56:58,277 p=30767 u=root |  changed: [master]
2019-10-12 06:56:58,300 p=30767 u=root |  TASK [updating metrics-server-deployment.yaml] ******************************************
2019-10-12 06:56:58,572 p=30767 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /home/kube/kubernetes/metrics-server-deployment.yaml not found"}
2019-10-12 06:56:58,575 p=30767 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:56:58,575 p=30767 u=root |  master                     : ok=8    changed=5    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2019-10-12 06:56:59,231 p=30949 u=root |  PLAY [master] ***************************************************************************
2019-10-12 06:56:59,239 p=30949 u=root |  TASK [get join command] *****************************************************************
2019-10-12 06:56:59,809 p=30949 u=root |  changed: [master]
2019-10-12 06:56:59,816 p=30949 u=root |  TASK [set join command] *****************************************************************
2019-10-12 06:56:59,837 p=30949 u=root |  ok: [master]
2019-10-12 06:56:59,847 p=30949 u=root |  PLAY [workers] **************************************************************************
2019-10-12 06:56:59,852 p=30949 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:57:02,065 p=30949 u=root |  ok: [worker2]
2019-10-12 06:57:02,148 p=30949 u=root |  ok: [worker1]
2019-10-12 06:57:02,170 p=30949 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 06:57:05,482 p=30949 u=root |  changed: [worker1]
2019-10-12 06:57:05,677 p=30949 u=root |  changed: [worker2]
2019-10-12 06:57:05,679 p=30949 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:57:05,679 p=30949 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:57:05,679 p=30949 u=root |  worker1                    : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:57:05,680 p=30949 u=root |  worker2                    : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 06:57:06,324 p=31096 u=root |  PLAY [masters] **************************************************************************
2019-10-12 06:57:06,333 p=31096 u=root |  TASK [Gathering Facts] ******************************************************************
2019-10-12 06:57:08,488 p=31096 u=root |  ok: [master]
2019-10-12 06:57:08,517 p=31096 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 06:57:09,130 p=31096 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.139203", "end": "2019-10-12 06:57:09.085986", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 06:57:08.946783", "stderr": "Error from server (NotFound): deployments.apps \"blue\" not found\nError from server (NotFound): services \"blue\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"blue\" not found", "Error from server (NotFound): services \"blue\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 06:57:09,523 p=31096 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.106008", "end": "2019-10-12 06:57:09.482265", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 06:57:09.376257", "stderr": "Error from server (NotFound): deployments.apps \"green\" not found\nError from server (NotFound): services \"green\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"green\" not found", "Error from server (NotFound): services \"green\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 06:57:09,524 p=31096 u=root |  ...ignoring
2019-10-12 06:57:09,554 p=31096 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 06:57:10,180 p=31096 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.264410", "end": "2019-10-12 06:57:10.117729", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 06:57:09.853319", "stderr": "The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/blue created\nhorizontalpodautoscaler.autoscaling/blue created", "stdout_lines": ["deployment.apps/blue created", "horizontalpodautoscaler.autoscaling/blue created"]}
2019-10-12 06:57:10,612 p=31096 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.158429", "end": "2019-10-12 06:57:10.568602", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 06:57:10.410173", "stderr": "The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/green created\nhorizontalpodautoscaler.autoscaling/green created", "stdout_lines": ["deployment.apps/green created", "horizontalpodautoscaler.autoscaling/green created"]}
2019-10-12 06:57:10,617 p=31096 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 06:57:10,617 p=31096 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 11:29:17,486 p=32030 u=root |  ERROR! Missing target hosts
2019-10-12 11:29:35,804 p=32034 u=root |  ERROR! Missing target hosts
2019-10-12 11:29:49,999 p=32039 u=root |  ERROR! Missing target hosts
2019-10-12 11:40:20,066 p=32175 u=root |  ERROR! the playbook: main.yml could not be found
2019-10-12 11:40:20,408 p=32178 u=root |  ERROR! the playbook: main.yml could not be found
2019-10-12 11:41:16,550 p=32184 u=root |  master | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 11:41:16,939 p=32184 u=root |  worker1 | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 11:41:17,179 p=32184 u=root |  worker2 | SUCCESS => {
    "changed": false, 
    "ping": "pong"
}
2019-10-12 12:05:52,463 p=2591 u=root |  ERROR! the playbook: /roles/install-kubernetes/tasks/main.yml could not be found
2019-10-12 12:05:52,797 p=2594 u=root |  ERROR! the playbook: /roles/create-user/tasks/main.yml could not be found
2019-10-12 12:05:53,136 p=2597 u=root |  ERROR! the playbook: /roles/configure-master-node/tasks/main.yml could not be found
2019-10-12 12:05:53,479 p=2600 u=root |  ERROR! the playbook: /roles/deploy-metrics-server-for-HPA/tasks/main.yml could not be found
2019-10-12 12:05:53,819 p=2603 u=root |  ERROR! the playbook: /roles/join-master/tasks/main.yml could not be found
2019-10-12 12:05:54,153 p=2606 u=root |  ERROR! the playbook: /roles/deploy-app/tasks/main.yml could not be found
2019-10-12 12:06:58,785 p=2626 u=root |  ERROR! the playbook: /roles/install-kubernetes/tasks/main.yml could not be found
2019-10-12 12:06:59,119 p=2629 u=root |  ERROR! the playbook: /roles/create-user/tasks/main.yml could not be found
2019-10-12 12:06:59,456 p=2632 u=root |  ERROR! the playbook: /roles/configure-master-node/tasks/main.yml could not be found
2019-10-12 12:06:59,795 p=2635 u=root |  ERROR! the playbook: /roles/deploy-metrics-server-for-HPA/tasks/main.yml could not be found
2019-10-12 12:07:00,143 p=2638 u=root |  ERROR! the playbook: /roles/join-master/tasks/main.yml could not be found
2019-10-12 12:07:00,487 p=2641 u=root |  ERROR! the playbook: /roles/deploy-app/tasks/main.yml could not be found
2019-10-12 12:07:28,115 p=2924 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:07:28,124 p=2924 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:07:28,158 p=2924 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:07:28,183 p=2924 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:07:28,218 p=2924 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:07:29,824 p=2924 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:07:29,830 p=2924 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:07:29,833 p=2924 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:07:29,924 p=2924 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:07:29,933 p=2924 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:07:31,463 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:31,482 p=2924 u=root |  ok: [master]
2019-10-12 12:07:31,553 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:31,560 p=2924 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:07:32,551 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:32,553 p=2924 u=root |  ok: [master]
2019-10-12 12:07:32,562 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:32,568 p=2924 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:07:39,120 p=2924 u=root |  ok: [master]
2019-10-12 12:07:39,763 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:41,434 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:41,441 p=2924 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:07:42,723 p=2924 u=root |  ok: [master]
2019-10-12 12:07:43,016 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:43,152 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:43,158 p=2924 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:07:43,933 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:43,936 p=2924 u=root |  ok: [master]
2019-10-12 12:07:43,938 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:43,947 p=2924 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:07:46,236 p=2924 u=root |  ok: [master]
2019-10-12 12:07:46,264 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:46,376 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:46,383 p=2924 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:07:47,599 p=2924 u=root |  ok: [master]
2019-10-12 12:07:47,603 p=2924 u=root |  ok: [worker1]
2019-10-12 12:07:47,636 p=2924 u=root |  ok: [worker2]
2019-10-12 12:07:47,645 p=2924 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:07:47,651 p=2924 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:07:48,661 p=2924 u=root |  ok: [master]
2019-10-12 12:07:48,665 p=2924 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:07:48,665 p=2924 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:48,666 p=2924 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:48,666 p=2924 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:49,137 p=3334 u=root |  ERROR! Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/root/kubernetes_with_kubeadm/roles/create-user/tasks/main.yml': line 23, column 4, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   - name: Create a Directory /opt/tomcat8
   ^ here

2019-10-12 12:07:49,770 p=3338 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:07:49,779 p=3338 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:07:50,302 p=3338 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882069.79-113136753387411/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882069.79-113136753387411/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882069.79-113136753387411/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_buzzuhig/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_buzzuhig/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:07:50,305 p=3338 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:07:50,306 p=3338 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:50,785 p=3362 u=root |  ERROR! A playbook must be a list of plays, got a <class 'ansible.parsing.yaml.objects.AnsibleMapping'> instead

The error appears to be in '/root/kubernetes_with_kubeadm/roles/deploy-metrics-server-for-HPA/tasks/main.yml': line 1, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


hosts: master
^ here

2019-10-12 12:07:51,414 p=3366 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:07:51,422 p=3366 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:07:52,185 p=3366 u=root |  changed: [master]
2019-10-12 12:07:52,192 p=3366 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:07:52,213 p=3366 u=root |  ok: [master]
2019-10-12 12:07:52,223 p=3366 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:07:52,230 p=3366 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:07:52,696 p=3366 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.27-53170646801743/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.27-53170646801743/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.27-53170646801743/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_z6ycgqg9/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_z6ycgqg9/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:07:52,706 p=3366 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.29-48246831961709/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.29-48246831961709/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882072.29-48246831961709/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_4da057vi/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_4da057vi/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:07:52,707 p=3366 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:07:52,707 p=3366 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:52,707 p=3366 u=root |  worker1                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:52,707 p=3366 u=root |  worker2                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:07:53,340 p=3425 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:07:53,349 p=3425 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:07:53,809 p=3425 u=root |  changed: [master]
2019-10-12 12:07:53,817 p=3425 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:07:53,837 p=3425 u=root |  ok: [master]
2019-10-12 12:07:53,844 p=3425 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:07:54,335 p=3425 u=root |  changed: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:07:54,609 p=3425 u=root |  changed: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:07:54,617 p=3425 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:07:56,138 p=3425 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:01.214950", "end": "2019-10-12 12:07:56.060364", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:07:54.845414", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists"], "stdout": "service/blue created", "stdout_lines": ["service/blue created"]}
2019-10-12 12:07:56,602 p=3425 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.192888", "end": "2019-10-12 12:07:56.530817", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:07:56.337929", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists"], "stdout": "service/green created", "stdout_lines": ["service/green created"]}
2019-10-12 12:07:56,606 p=3425 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:07:56,607 p=3425 u=root |  master                     : ok=3    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:10:49,112 p=3791 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:10:49,121 p=3791 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:10:49,162 p=3791 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:10:49,179 p=3791 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:10:49,214 p=3791 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:10:50,560 p=3791 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:10:50,564 p=3791 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:10:50,593 p=3791 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:10:50,639 p=3791 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:10:50,648 p=3791 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:10:52,025 p=3791 u=root |  ok: [worker1]
2019-10-12 12:10:52,031 p=3791 u=root |  ok: [master]
2019-10-12 12:10:52,095 p=3791 u=root |  ok: [worker2]
2019-10-12 12:10:52,102 p=3791 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:10:53,063 p=3791 u=root |  ok: [worker1]
2019-10-12 12:10:53,065 p=3791 u=root |  ok: [worker2]
2019-10-12 12:10:53,069 p=3791 u=root |  ok: [master]
2019-10-12 12:10:53,077 p=3791 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:10:55,372 p=3791 u=root |  ok: [master]
2019-10-12 12:10:55,482 p=3791 u=root |  ok: [worker2]
2019-10-12 12:10:55,576 p=3791 u=root |  ok: [worker1]
2019-10-12 12:10:55,582 p=3791 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:10:56,833 p=3791 u=root |  ok: [worker1]
2019-10-12 12:10:56,874 p=3791 u=root |  ok: [master]
2019-10-12 12:10:56,941 p=3791 u=root |  ok: [worker2]
2019-10-12 12:10:56,947 p=3791 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:10:57,673 p=3791 u=root |  ok: [worker1]
2019-10-12 12:10:57,682 p=3791 u=root |  ok: [master]
2019-10-12 12:10:57,716 p=3791 u=root |  ok: [worker2]
2019-10-12 12:10:57,723 p=3791 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:10:59,990 p=3791 u=root |  ok: [worker1]
2019-10-12 12:11:00,037 p=3791 u=root |  ok: [master]
2019-10-12 12:11:00,124 p=3791 u=root |  ok: [worker2]
2019-10-12 12:11:00,131 p=3791 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:11:01,346 p=3791 u=root |  ok: [master]
2019-10-12 12:11:01,349 p=3791 u=root |  ok: [worker1]
2019-10-12 12:11:01,355 p=3791 u=root |  ok: [worker2]
2019-10-12 12:11:01,365 p=3791 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:11:01,370 p=3791 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:11:02,450 p=3791 u=root |  ok: [master]
2019-10-12 12:11:02,453 p=3791 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:02,454 p=3791 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:02,454 p=3791 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:02,454 p=3791 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:02,928 p=4200 u=root |  ERROR! Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/root/kubernetes_with_kubeadm/roles/create-user/tasks/main.yml': line 23, column 4, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   - name: Create a Directory /home/kube/logs
   ^ here

2019-10-12 12:11:03,550 p=4204 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:11:03,559 p=4204 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:11:04,085 p=4204 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882263.57-150540720194803/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882263.57-150540720194803/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882263.57-150540720194803/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_fzuzid5k/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_fzuzid5k/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:11:04,089 p=4204 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:04,089 p=4204 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:04,556 p=4228 u=root |  ERROR! A playbook must be a list of plays, got a <class 'ansible.parsing.yaml.objects.AnsibleMapping'> instead

The error appears to be in '/root/kubernetes_with_kubeadm/roles/deploy-metrics-server-for-HPA/tasks/main.yml': line 1, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


hosts: master
^ here

2019-10-12 12:11:05,175 p=4232 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:11:05,183 p=4232 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:11:05,720 p=4232 u=root |  changed: [master]
2019-10-12 12:11:05,728 p=4232 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:11:05,748 p=4232 u=root |  ok: [master]
2019-10-12 12:11:05,759 p=4232 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:11:05,766 p=4232 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:11:06,198 p=4232 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.8-141581497021970/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.8-141581497021970/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.8-141581497021970/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_pa0xsjcm/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_pa0xsjcm/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:11:06,218 p=4232 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.82-93113312348808/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.82-93113312348808/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882265.82-93113312348808/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_684muehp/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_684muehp/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:11:06,219 p=4232 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:06,219 p=4232 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:06,220 p=4232 u=root |  worker1                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:06,220 p=4232 u=root |  worker2                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:06,861 p=4291 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:11:06,869 p=4291 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:11:07,336 p=4291 u=root |  changed: [master]
2019-10-12 12:11:07,343 p=4291 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:11:07,364 p=4291 u=root |  ok: [master]
2019-10-12 12:11:07,371 p=4291 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:11:07,845 p=4291 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:11:08,137 p=4291 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:11:08,147 p=4291 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:11:08,630 p=4291 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.182374", "end": "2019-10-12 12:11:08.546773", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:11:08.364399", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:11:09,092 p=4291 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.189253", "end": "2019-10-12 12:11:09.015824", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:11:08.826571", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:11:09,096 p=4291 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:09,096 p=4291 u=root |  master                     : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:42,601 p=4645 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:11:42,609 p=4645 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:11:42,642 p=4645 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:11:42,667 p=4645 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:11:42,702 p=4645 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:11:44,035 p=4645 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:11:44,039 p=4645 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:11:44,077 p=4645 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:11:44,141 p=4645 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:11:44,150 p=4645 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:11:45,490 p=4645 u=root |  ok: [master]
2019-10-12 12:11:45,512 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:45,593 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:45,598 p=4645 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:11:46,538 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:46,540 p=4645 u=root |  ok: [master]
2019-10-12 12:11:46,561 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:46,567 p=4645 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:11:48,914 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:49,069 p=4645 u=root |  ok: [master]
2019-10-12 12:11:49,257 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:49,264 p=4645 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:11:50,532 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:50,643 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:50,843 p=4645 u=root |  ok: [master]
2019-10-12 12:11:50,850 p=4645 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:11:51,581 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:51,609 p=4645 u=root |  ok: [master]
2019-10-12 12:11:51,613 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:51,620 p=4645 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:11:53,834 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:53,936 p=4645 u=root |  ok: [master]
2019-10-12 12:11:54,054 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:54,061 p=4645 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:11:55,236 p=4645 u=root |  ok: [worker1]
2019-10-12 12:11:55,273 p=4645 u=root |  ok: [master]
2019-10-12 12:11:55,283 p=4645 u=root |  ok: [worker2]
2019-10-12 12:11:55,293 p=4645 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:11:55,298 p=4645 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:11:56,295 p=4645 u=root |  ok: [master]
2019-10-12 12:11:56,298 p=4645 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:56,298 p=4645 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:56,299 p=4645 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:56,299 p=4645 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:56,933 p=5054 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:11:56,941 p=5054 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:11:57,688 p=5054 u=root |  ok: [master]
2019-10-12 12:11:57,707 p=5054 u=root |  ok: [worker1]
2019-10-12 12:11:57,710 p=5054 u=root |  ok: [worker2]
2019-10-12 12:11:57,717 p=5054 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:11:58,367 p=5054 u=root |  ok: [worker2]
2019-10-12 12:11:58,369 p=5054 u=root |  ok: [master]
2019-10-12 12:11:58,373 p=5054 u=root |  ok: [worker1]
2019-10-12 12:11:58,380 p=5054 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:11:59,241 p=5054 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:11:59,249 p=5054 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:11:59,255 p=5054 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:11:59,263 p=5054 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:11:59,931 p=5054 u=root |  changed: [master]
2019-10-12 12:11:59,937 p=5054 u=root |  ok: [worker1]
2019-10-12 12:11:59,944 p=5054 u=root |  ok: [worker2]
2019-10-12 12:11:59,948 p=5054 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:11:59,948 p=5054 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:59,948 p=5054 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:11:59,949 p=5054 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:12:00,595 p=5254 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:12:00,603 p=5254 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:12:01,118 p=5254 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882320.62-84145908348032/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882320.62-84145908348032/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882320.62-84145908348032/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_fjcvun7t/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_fjcvun7t/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:12:01,122 p=5254 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:12:01,122 p=5254 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:12:01,600 p=5278 u=root |  ERROR! A playbook must be a list of plays, got a <class 'ansible.parsing.yaml.objects.AnsibleMapping'> instead

The error appears to be in '/root/kubernetes_with_kubeadm/roles/deploy-metrics-server-for-HPA/tasks/main.yml': line 1, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


hosts: master
^ here

2019-10-12 12:12:02,244 p=5282 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:12:02,252 p=5282 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:12:02,777 p=5282 u=root |  changed: [master]
2019-10-12 12:12:02,785 p=5282 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:12:02,805 p=5282 u=root |  ok: [master]
2019-10-12 12:12:02,815 p=5282 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:12:02,822 p=5282 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:12:03,250 p=5282 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.86-135579665148304/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.86-135579665148304/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.86-135579665148304/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_ncljadhb/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_ncljadhb/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:12:03,270 p=5282 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.88-43366313794424/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.88-43366313794424/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882322.88-43366313794424/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_b5_d8_tv/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_b5_d8_tv/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:12:03,271 p=5282 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:12:03,271 p=5282 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:12:03,271 p=5282 u=root |  worker1                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:12:03,272 p=5282 u=root |  worker2                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:12:03,905 p=5341 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:12:03,913 p=5341 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:12:04,374 p=5341 u=root |  changed: [master]
2019-10-12 12:12:04,382 p=5341 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:12:04,402 p=5341 u=root |  ok: [master]
2019-10-12 12:12:04,408 p=5341 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:12:04,873 p=5341 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:12:05,143 p=5341 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:12:05,152 p=5341 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:12:05,638 p=5341 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.176656", "end": "2019-10-12 12:12:05.547842", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:12:05.371186", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:12:06,088 p=5341 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.173913", "end": "2019-10-12 12:12:06.006227", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:12:05.832314", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:12:06,093 p=5341 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:12:06,093 p=5341 u=root |  master                     : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:28,481 p=5740 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:14:28,489 p=5740 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:14:28,526 p=5740 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:14:28,546 p=5740 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:14:28,581 p=5740 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:14:29,926 p=5740 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:14:29,929 p=5740 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:14:29,961 p=5740 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:14:30,022 p=5740 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:14:30,032 p=5740 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:14:31,844 p=5740 u=root |  ok: [master]
2019-10-12 12:14:31,849 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:31,871 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:31,878 p=5740 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:14:32,847 p=5740 u=root |  ok: [master]
2019-10-12 12:14:32,851 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:32,852 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:32,861 p=5740 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:14:35,156 p=5740 u=root |  ok: [master]
2019-10-12 12:14:35,277 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:35,355 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:35,362 p=5740 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:14:36,623 p=5740 u=root |  ok: [master]
2019-10-12 12:14:36,715 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:36,721 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:36,728 p=5740 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:14:37,477 p=5740 u=root |  ok: [master]
2019-10-12 12:14:37,482 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:37,489 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:37,495 p=5740 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:14:39,784 p=5740 u=root |  ok: [master]
2019-10-12 12:14:39,841 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:39,904 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:39,911 p=5740 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:14:41,142 p=5740 u=root |  ok: [master]
2019-10-12 12:14:41,161 p=5740 u=root |  ok: [worker2]
2019-10-12 12:14:41,164 p=5740 u=root |  ok: [worker1]
2019-10-12 12:14:41,173 p=5740 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:14:41,179 p=5740 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:14:42,247 p=5740 u=root |  ok: [master]
2019-10-12 12:14:42,249 p=5740 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:42,250 p=5740 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:42,250 p=5740 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:42,251 p=5740 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:42,895 p=6150 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:14:42,904 p=6150 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:14:43,649 p=6150 u=root |  ok: [master]
2019-10-12 12:14:43,655 p=6150 u=root |  ok: [worker1]
2019-10-12 12:14:43,657 p=6150 u=root |  ok: [worker2]
2019-10-12 12:14:43,666 p=6150 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:14:44,306 p=6150 u=root |  ok: [master]
2019-10-12 12:14:44,308 p=6150 u=root |  ok: [worker1]
2019-10-12 12:14:44,315 p=6150 u=root |  ok: [worker2]
2019-10-12 12:14:44,321 p=6150 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:14:45,172 p=6150 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:14:45,198 p=6150 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:14:45,217 p=6150 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:14:45,224 p=6150 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:14:45,896 p=6150 u=root |  ok: [worker2]
2019-10-12 12:14:45,899 p=6150 u=root |  ok: [master]
2019-10-12 12:14:45,901 p=6150 u=root |  ok: [worker1]
2019-10-12 12:14:45,907 p=6150 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:45,907 p=6150 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:45,907 p=6150 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:45,908 p=6150 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:46,547 p=6350 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:14:46,555 p=6350 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:14:47,067 p=6350 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882486.57-110531371111091/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882486.57-110531371111091/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882486.57-110531371111091/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_acyz5z13/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_acyz5z13/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:14:47,070 p=6350 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:47,071 p=6350 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:47,703 p=6374 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:14:47,711 p=6374 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:14:50,864 p=6374 u=root |  ok: [master]
2019-10-12 12:14:50,871 p=6374 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:14:51,954 p=6374 u=root |  changed: [master]
2019-10-12 12:14:51,962 p=6374 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 12:14:52,418 p=6374 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f metrics-server/deploy/1.8+/ >> deploy-metrics-server-for-HPA1.txt", "delta": "0:00:00.002137", "end": "2019-10-12 12:14:52.318290", "msg": "non-zero return code", "rc": 2, "start": "2019-10-12 12:14:52.316153", "stderr": "/bin/sh: 1: cannot create deploy-metrics-server-for-HPA1.txt: Permission denied", "stderr_lines": ["/bin/sh: 1: cannot create deploy-metrics-server-for-HPA1.txt: Permission denied"], "stdout": "", "stdout_lines": []}
2019-10-12 12:14:52,421 p=6374 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:52,422 p=6374 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:53,051 p=6430 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:14:53,059 p=6430 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:14:53,573 p=6430 u=root |  changed: [master]
2019-10-12 12:14:53,580 p=6430 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:14:53,601 p=6430 u=root |  ok: [master]
2019-10-12 12:14:53,612 p=6430 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:14:53,619 p=6430 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:14:54,077 p=6430 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.66-280687414997909/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.66-280687414997909/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.66-280687414997909/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_p4prjxxv/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_p4prjxxv/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:14:54,081 p=6430 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.67-98366924721594/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.67-98366924721594/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882493.67-98366924721594/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_l3c3ggx1/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_l3c3ggx1/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:14:54,082 p=6430 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:54,083 p=6430 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:54,084 p=6430 u=root |  worker1                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:54,084 p=6430 u=root |  worker2                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:14:54,758 p=6489 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:14:54,766 p=6489 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:14:55,234 p=6489 u=root |  changed: [master]
2019-10-12 12:14:55,242 p=6489 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:14:55,264 p=6489 u=root |  ok: [master]
2019-10-12 12:14:55,270 p=6489 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:14:55,738 p=6489 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:14:56,010 p=6489 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:14:56,019 p=6489 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:14:56,503 p=6489 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.176914", "end": "2019-10-12 12:14:56.394812", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:14:56.217898", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:14:56,977 p=6489 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.196717", "end": "2019-10-12 12:14:56.875548", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:14:56.678831", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:14:56,982 p=6489 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:14:56,983 p=6489 u=root |  master                     : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:13,441 p=6853 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:16:13,449 p=6853 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:16:13,486 p=6853 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:16:13,506 p=6853 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:16:13,542 p=6853 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:16:14,882 p=6853 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:16:14,886 p=6853 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:16:14,922 p=6853 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:16:14,951 p=6853 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:16:14,960 p=6853 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:16:16,332 p=6853 u=root |  ok: [master]
2019-10-12 12:16:16,413 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:16,451 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:16,457 p=6853 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:16:17,398 p=6853 u=root |  ok: [master]
2019-10-12 12:16:17,402 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:17,421 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:17,427 p=6853 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:16:19,826 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:19,865 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:19,974 p=6853 u=root |  ok: [master]
2019-10-12 12:16:19,981 p=6853 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:16:21,280 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:21,285 p=6853 u=root |  ok: [master]
2019-10-12 12:16:21,412 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:21,418 p=6853 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:16:22,150 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:22,176 p=6853 u=root |  ok: [master]
2019-10-12 12:16:22,181 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:22,188 p=6853 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:16:24,437 p=6853 u=root |  ok: [master]
2019-10-12 12:16:24,506 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:24,866 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:24,873 p=6853 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:16:26,067 p=6853 u=root |  ok: [master]
2019-10-12 12:16:26,094 p=6853 u=root |  ok: [worker1]
2019-10-12 12:16:26,150 p=6853 u=root |  ok: [worker2]
2019-10-12 12:16:26,159 p=6853 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:16:26,164 p=6853 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:16:27,175 p=6853 u=root |  ok: [master]
2019-10-12 12:16:27,178 p=6853 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:27,179 p=6853 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:27,179 p=6853 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:27,179 p=6853 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:27,817 p=7262 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:16:27,825 p=7262 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:16:28,567 p=7262 u=root |  ok: [master]
2019-10-12 12:16:28,570 p=7262 u=root |  ok: [worker2]
2019-10-12 12:16:28,572 p=7262 u=root |  ok: [worker1]
2019-10-12 12:16:28,580 p=7262 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:16:29,223 p=7262 u=root |  ok: [worker1]
2019-10-12 12:16:29,226 p=7262 u=root |  ok: [master]
2019-10-12 12:16:29,230 p=7262 u=root |  ok: [worker2]
2019-10-12 12:16:29,238 p=7262 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:16:30,107 p=7262 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:16:30,111 p=7262 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:16:30,127 p=7262 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:16:30,134 p=7262 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:16:30,791 p=7262 u=root |  ok: [master]
2019-10-12 12:16:30,794 p=7262 u=root |  ok: [worker1]
2019-10-12 12:16:30,799 p=7262 u=root |  ok: [worker2]
2019-10-12 12:16:30,802 p=7262 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:30,802 p=7262 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:30,802 p=7262 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:30,802 p=7262 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:31,432 p=7462 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:16:31,441 p=7462 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:16:31,951 p=7462 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882591.46-247530726443526/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882591.46-247530726443526/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882591.46-247530726443526/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_uf6w18te/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_uf6w18te/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:16:31,954 p=7462 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:31,955 p=7462 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:32,586 p=7486 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:16:32,594 p=7486 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:16:33,096 p=7486 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:16:33,100 p=7486 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:33,100 p=7486 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:33,730 p=7510 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:16:33,738 p=7510 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:16:34,250 p=7510 u=root |  changed: [master]
2019-10-12 12:16:34,257 p=7510 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:16:34,278 p=7510 u=root |  ok: [master]
2019-10-12 12:16:34,288 p=7510 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:16:34,295 p=7510 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:16:34,721 p=7510 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.33-71035371129091/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.33-71035371129091/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.33-71035371129091/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_7dnkd9e4/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_7dnkd9e4/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:16:34,738 p=7510 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.35-39693951106997/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.35-39693951106997/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882594.35-39693951106997/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_tixclud8/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_tixclud8/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:16:34,739 p=7510 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:34,740 p=7510 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:34,740 p=7510 u=root |  worker1                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:34,740 p=7510 u=root |  worker2                    : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:16:35,377 p=7569 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:16:35,385 p=7569 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:16:35,837 p=7569 u=root |  changed: [master]
2019-10-12 12:16:35,845 p=7569 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:16:35,865 p=7569 u=root |  ok: [master]
2019-10-12 12:16:35,871 p=7569 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:16:36,335 p=7569 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:16:36,599 p=7569 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:16:36,607 p=7569 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:16:37,102 p=7569 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.191504", "end": "2019-10-12 12:16:37.019831", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:16:36.828327", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:16:37,568 p=7569 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.198950", "end": "2019-10-12 12:16:37.492585", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:16:37.293635", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:16:37,572 p=7569 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:16:37,573 p=7569 u=root |  master                     : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:36,189 p=7958 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:22:36,197 p=7958 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:22:36,237 p=7958 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:22:36,254 p=7958 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:22:36,284 p=7958 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:22:37,650 p=7958 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:22:37,654 p=7958 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:22:37,684 p=7958 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:22:37,687 p=7958 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:22:37,698 p=7958 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:22:39,312 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:39,315 p=7958 u=root |  ok: [master]
2019-10-12 12:22:39,347 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:39,354 p=7958 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:22:40,314 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:40,317 p=7958 u=root |  ok: [master]
2019-10-12 12:22:40,356 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:40,363 p=7958 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:22:43,236 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:43,261 p=7958 u=root |  ok: [master]
2019-10-12 12:22:43,286 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:43,293 p=7958 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:22:44,601 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:44,661 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:44,709 p=7958 u=root |  ok: [master]
2019-10-12 12:22:44,717 p=7958 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:22:45,433 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:45,467 p=7958 u=root |  ok: [master]
2019-10-12 12:22:45,509 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:45,515 p=7958 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:22:47,814 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:47,893 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:47,925 p=7958 u=root |  ok: [master]
2019-10-12 12:22:47,932 p=7958 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:22:49,167 p=7958 u=root |  ok: [master]
2019-10-12 12:22:49,182 p=7958 u=root |  ok: [worker1]
2019-10-12 12:22:49,193 p=7958 u=root |  ok: [worker2]
2019-10-12 12:22:49,202 p=7958 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:22:49,208 p=7958 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:22:50,237 p=7958 u=root |  ok: [master]
2019-10-12 12:22:50,241 p=7958 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:22:50,241 p=7958 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:50,242 p=7958 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:50,242 p=7958 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:50,896 p=8367 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:22:50,904 p=8367 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:22:51,638 p=8367 u=root |  ok: [master]
2019-10-12 12:22:51,646 p=8367 u=root |  ok: [worker2]
2019-10-12 12:22:51,646 p=8367 u=root |  ok: [worker1]
2019-10-12 12:22:51,655 p=8367 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:22:52,295 p=8367 u=root |  ok: [worker1]
2019-10-12 12:22:52,297 p=8367 u=root |  ok: [master]
2019-10-12 12:22:52,303 p=8367 u=root |  ok: [worker2]
2019-10-12 12:22:52,308 p=8367 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:22:53,170 p=8367 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:22:53,179 p=8367 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:22:53,183 p=8367 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:22:53,192 p=8367 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:22:53,866 p=8367 u=root |  ok: [worker1]
2019-10-12 12:22:53,868 p=8367 u=root |  ok: [master]
2019-10-12 12:22:53,882 p=8367 u=root |  ok: [worker2]
2019-10-12 12:22:53,886 p=8367 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:22:53,886 p=8367 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:53,887 p=8367 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:53,887 p=8367 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:54,529 p=8567 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:22:54,537 p=8567 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:22:55,046 p=8567 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.80 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882974.55-81850673476670/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882974.55-81850673476670/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882974.55-81850673476670/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_5bp2ohrk/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_5bp2ohrk/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:22:55,047 p=8567 u=root |  ...ignoring
2019-10-12 12:22:55,054 p=8567 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:22:55,535 p=8567 u=root |  ok: [master]
2019-10-12 12:22:55,543 p=8567 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:22:56,007 p=8567 u=root |  ok: [master]
2019-10-12 12:22:56,015 p=8567 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 12:22:56,387 p=8567 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f \"https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\\n')\" >> configure-master-node2.txt", "delta": "0:00:00.081644", "end": "2019-10-12 12:22:56.317056", "msg": "non-zero return code", "rc": 2, "start": "2019-10-12 12:22:56.235412", "stderr": "/bin/sh: 1: cannot create configure-master-node2.txt: Permission denied", "stderr_lines": ["/bin/sh: 1: cannot create configure-master-node2.txt: Permission denied"], "stdout": "", "stdout_lines": []}
2019-10-12 12:22:56,390 p=8567 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:22:56,390 p=8567 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:22:57,043 p=8637 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:22:57,051 p=8637 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:22:57,576 p=8637 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:22:57,579 p=8637 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:22:57,580 p=8637 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:58,224 p=8661 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:22:58,233 p=8661 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:22:58,764 p=8661 u=root |  changed: [master]
2019-10-12 12:22:58,771 p=8661 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:22:58,792 p=8661 u=root |  ok: [master]
2019-10-12 12:22:58,802 p=8661 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:22:58,809 p=8661 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:22:59,238 p=8661 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.85-74986767654505/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.85-74986767654505/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.85-74986767654505/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_9_g44vc5/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_9_g44vc5/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:22:59,238 p=8661 u=root |  ...ignoring
2019-10-12 12:22:59,268 p=8661 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.87-24459317186309/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.87-24459317186309/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570882978.87-24459317186309/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_m17jxsn6/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_m17jxsn6/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:22:59,268 p=8661 u=root |  ...ignoring
2019-10-12 12:22:59,270 p=8661 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:22:59,270 p=8661 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:22:59,270 p=8661 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:22:59,271 p=8661 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:22:59,909 p=8720 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:22:59,918 p=8720 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:23:00,398 p=8720 u=root |  changed: [master]
2019-10-12 12:23:00,405 p=8720 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:23:00,426 p=8720 u=root |  ok: [master]
2019-10-12 12:23:00,433 p=8720 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:23:00,897 p=8720 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:23:01,190 p=8720 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:23:01,199 p=8720 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:23:01,688 p=8720 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.181743", "end": "2019-10-12 12:23:01.610971", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:23:01.429228", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:23:02,171 p=8720 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.182108", "end": "2019-10-12 12:23:02.098906", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:23:01.916798", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:23:02,172 p=8720 u=root |  ...ignoring
2019-10-12 12:23:02,176 p=8720 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:23:02,177 p=8720 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:26:51,951 p=9086 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:26:51,959 p=9086 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:26:51,994 p=9086 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:26:52,020 p=9086 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:26:52,054 p=9086 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:26:53,397 p=9086 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:26:53,400 p=9086 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:26:53,439 p=9086 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:26:53,486 p=9086 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:26:53,495 p=9086 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:26:54,870 p=9086 u=root |  ok: [master]
2019-10-12 12:26:54,896 p=9086 u=root |  ok: [worker1]
2019-10-12 12:26:54,945 p=9086 u=root |  ok: [worker2]
2019-10-12 12:26:54,952 p=9086 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:26:55,911 p=9086 u=root |  ok: [worker1]
2019-10-12 12:26:55,916 p=9086 u=root |  ok: [master]
2019-10-12 12:26:55,940 p=9086 u=root |  ok: [worker2]
2019-10-12 12:26:55,947 p=9086 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:26:58,290 p=9086 u=root |  ok: [worker1]
2019-10-12 12:26:58,323 p=9086 u=root |  ok: [master]
2019-10-12 12:26:58,761 p=9086 u=root |  ok: [worker2]
2019-10-12 12:26:58,768 p=9086 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:27:00,041 p=9086 u=root |  ok: [worker1]
2019-10-12 12:27:00,088 p=9086 u=root |  ok: [master]
2019-10-12 12:27:00,168 p=9086 u=root |  ok: [worker2]
2019-10-12 12:27:00,175 p=9086 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:27:00,893 p=9086 u=root |  ok: [worker1]
2019-10-12 12:27:00,925 p=9086 u=root |  ok: [master]
2019-10-12 12:27:00,936 p=9086 u=root |  ok: [worker2]
2019-10-12 12:27:00,943 p=9086 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:27:03,215 p=9086 u=root |  ok: [worker1]
2019-10-12 12:27:03,292 p=9086 u=root |  ok: [master]
2019-10-12 12:27:03,337 p=9086 u=root |  ok: [worker2]
2019-10-12 12:27:03,343 p=9086 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:27:04,550 p=9086 u=root |  ok: [worker1]
2019-10-12 12:27:04,569 p=9086 u=root |  ok: [master]
2019-10-12 12:27:04,598 p=9086 u=root |  ok: [worker2]
2019-10-12 12:27:04,607 p=9086 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:27:04,612 p=9086 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:27:05,641 p=9086 u=root |  ok: [master]
2019-10-12 12:27:05,643 p=9086 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:05,645 p=9086 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:05,645 p=9086 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:05,645 p=9086 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:06,286 p=9495 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:27:06,294 p=9495 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:27:07,044 p=9495 u=root |  ok: [master]
2019-10-12 12:27:07,046 p=9495 u=root |  ok: [worker2]
2019-10-12 12:27:07,051 p=9495 u=root |  ok: [worker1]
2019-10-12 12:27:07,058 p=9495 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:27:07,696 p=9495 u=root |  ok: [worker2]
2019-10-12 12:27:07,700 p=9495 u=root |  ok: [master]
2019-10-12 12:27:07,715 p=9495 u=root |  ok: [worker1]
2019-10-12 12:27:07,722 p=9495 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:27:08,578 p=9495 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:27:08,583 p=9495 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:27:08,588 p=9495 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:27:08,594 p=9495 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:27:09,256 p=9495 u=root |  ok: [master]
2019-10-12 12:27:09,259 p=9495 u=root |  ok: [worker2]
2019-10-12 12:27:09,263 p=9495 u=root |  ok: [worker1]
2019-10-12 12:27:09,267 p=9495 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:09,268 p=9495 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:09,268 p=9495 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:09,268 p=9495 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:09,903 p=9695 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:27:09,911 p=9695 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:27:10,370 p=9695 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.002988", "end": "2019-10-12 12:27:10.307860", "msg": "non-zero return code", "rc": 2, "start": "2019-10-12 12:27:10.304872", "stderr": "/bin/sh: 1: cannot create configure-master-node1.txt: Permission denied", "stderr_lines": ["/bin/sh: 1: cannot create configure-master-node1.txt: Permission denied"], "stdout": "", "stdout_lines": []}
2019-10-12 12:27:10,370 p=9695 u=root |  ...ignoring
2019-10-12 12:27:10,378 p=9695 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:27:10,853 p=9695 u=root |  ok: [master]
2019-10-12 12:27:10,861 p=9695 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:27:11,311 p=9695 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /etc/kubernetes/admin.conf not readable"}
2019-10-12 12:27:11,314 p=9695 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:11,315 p=9695 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:27:11,960 p=9749 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:27:11,968 p=9749 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:27:12,486 p=9749 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:27:12,487 p=9749 u=root |  ...ignoring
2019-10-12 12:27:12,494 p=9749 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:27:13,650 p=9749 u=root |  ok: [master]
2019-10-12 12:27:13,658 p=9749 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 12:27:14,119 p=9749 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f metrics-server/deploy/1.8+/ >> deploy-metrics-server-for-HPA1.txt", "delta": "0:00:00.002165", "end": "2019-10-12 12:27:14.059573", "msg": "non-zero return code", "rc": 2, "start": "2019-10-12 12:27:14.057408", "stderr": "/bin/sh: 1: cannot create deploy-metrics-server-for-HPA1.txt: Permission denied", "stderr_lines": ["/bin/sh: 1: cannot create deploy-metrics-server-for-HPA1.txt: Permission denied"], "stdout": "", "stdout_lines": []}
2019-10-12 12:27:14,123 p=9749 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:14,123 p=9749 u=root |  master                     : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:27:14,750 p=9806 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:27:14,758 p=9806 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:27:15,293 p=9806 u=root |  changed: [master]
2019-10-12 12:27:15,300 p=9806 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:27:15,321 p=9806 u=root |  ok: [master]
2019-10-12 12:27:15,330 p=9806 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:27:15,337 p=9806 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:27:15,764 p=9806 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.37-92882182516261/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.37-92882182516261/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.37-92882182516261/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_brveqbh9/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_brveqbh9/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:27:15,765 p=9806 u=root |  ...ignoring
2019-10-12 12:27:15,781 p=9806 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.39-191766826443151/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.39-191766826443151/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883235.39-191766826443151/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_200kxhg5/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_200kxhg5/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:27:15,781 p=9806 u=root |  ...ignoring
2019-10-12 12:27:15,783 p=9806 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:15,784 p=9806 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:27:15,784 p=9806 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:27:15,785 p=9806 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:27:16,415 p=9865 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:27:16,423 p=9865 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:27:16,884 p=9865 u=root |  changed: [master]
2019-10-12 12:27:16,891 p=9865 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:27:16,911 p=9865 u=root |  ok: [master]
2019-10-12 12:27:16,918 p=9865 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:27:17,381 p=9865 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:27:17,652 p=9865 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:27:17,660 p=9865 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:27:18,167 p=9865 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.199182", "end": "2019-10-12 12:27:18.099757", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:27:17.900575", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:27:18,628 p=9865 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.187176", "end": "2019-10-12 12:27:18.567732", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:27:18.380556", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:27:18,630 p=9865 u=root |  ...ignoring
2019-10-12 12:27:18,634 p=9865 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:27:18,634 p=9865 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:30:04,735 p=10241 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:30:04,744 p=10241 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:30:04,778 p=10241 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:30:04,803 p=10241 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:30:04,838 p=10241 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:30:06,212 p=10241 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:30:06,218 p=10241 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:30:06,237 p=10241 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:30:06,276 p=10241 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:30:06,285 p=10241 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:30:07,887 p=10241 u=root |  ok: [master]
2019-10-12 12:30:07,904 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:07,925 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:07,931 p=10241 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:30:08,889 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:08,893 p=10241 u=root |  ok: [master]
2019-10-12 12:30:08,895 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:08,902 p=10241 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:30:11,601 p=10241 u=root |  ok: [master]
2019-10-12 12:30:11,679 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:11,816 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:11,823 p=10241 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:30:13,141 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:13,238 p=10241 u=root |  ok: [master]
2019-10-12 12:30:13,297 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:13,304 p=10241 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:30:14,029 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:14,066 p=10241 u=root |  ok: [master]
2019-10-12 12:30:14,091 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:14,097 p=10241 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:30:16,390 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:16,497 p=10241 u=root |  ok: [master]
2019-10-12 12:30:16,555 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:16,562 p=10241 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:30:17,783 p=10241 u=root |  ok: [master]
2019-10-12 12:30:17,787 p=10241 u=root |  ok: [worker1]
2019-10-12 12:30:17,846 p=10241 u=root |  ok: [worker2]
2019-10-12 12:30:17,855 p=10241 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:30:17,861 p=10241 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:30:18,886 p=10241 u=root |  ok: [master]
2019-10-12 12:30:18,888 p=10241 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:18,890 p=10241 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:18,890 p=10241 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:18,890 p=10241 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:19,544 p=10650 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:30:19,553 p=10650 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:30:20,302 p=10650 u=root |  ok: [master]
2019-10-12 12:30:20,310 p=10650 u=root |  ok: [worker2]
2019-10-12 12:30:20,310 p=10650 u=root |  ok: [worker1]
2019-10-12 12:30:20,319 p=10650 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:30:20,964 p=10650 u=root |  ok: [master]
2019-10-12 12:30:20,968 p=10650 u=root |  ok: [worker1]
2019-10-12 12:30:20,972 p=10650 u=root |  ok: [worker2]
2019-10-12 12:30:20,980 p=10650 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:30:21,847 p=10650 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:30:21,852 p=10650 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:30:21,893 p=10650 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:30:21,900 p=10650 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:30:22,593 p=10650 u=root |  changed: [master]
2019-10-12 12:30:22,595 p=10650 u=root |  changed: [worker2]
2019-10-12 12:30:22,600 p=10650 u=root |  changed: [worker1]
2019-10-12 12:30:22,605 p=10650 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:22,605 p=10650 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:22,606 p=10650 u=root |  worker1                    : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:22,606 p=10650 u=root |  worker2                    : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:23,260 p=10850 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:30:23,269 p=10850 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:30:24,738 p=10850 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.998913", "end": "2019-10-12 12:30:24.675441", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:30:23.676528", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 12:30:24,740 p=10850 u=root |  ...ignoring
2019-10-12 12:30:24,746 p=10850 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:30:25,230 p=10850 u=root |  ok: [master]
2019-10-12 12:30:25,239 p=10850 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:30:25,700 p=10850 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /etc/kubernetes/admin.conf not readable"}
2019-10-12 12:30:25,704 p=10850 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:25,704 p=10850 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:30:26,352 p=10904 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:30:26,360 p=10904 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:30:26,887 p=10904 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:30:26,887 p=10904 u=root |  ...ignoring
2019-10-12 12:30:26,894 p=10904 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:30:27,788 p=10904 u=root |  ok: [master]
2019-10-12 12:30:27,795 p=10904 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 12:30:28,396 p=10904 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f metrics-server/deploy/1.8+/ >> deploy-metrics-server-for-HPA1.txt", "delta": "0:00:00.144982", "end": "2019-10-12 12:30:28.333831", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:30:28.188849", "stderr": "error: the path \"metrics-server/deploy/1.8+/\" does not exist", "stderr_lines": ["error: the path \"metrics-server/deploy/1.8+/\" does not exist"], "stdout": "", "stdout_lines": []}
2019-10-12 12:30:28,399 p=10904 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:28,400 p=10904 u=root |  master                     : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:30:29,038 p=10960 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:30:29,047 p=10960 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:30:29,573 p=10960 u=root |  changed: [master]
2019-10-12 12:30:29,581 p=10960 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:30:29,602 p=10960 u=root |  ok: [master]
2019-10-12 12:30:29,612 p=10960 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:30:29,620 p=10960 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:30:30,048 p=10960 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.66-81589633460083/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.66-81589633460083/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.66-81589633460083/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_c87iu7xk/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_c87iu7xk/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:30:30,049 p=10960 u=root |  ...ignoring
2019-10-12 12:30:30,076 p=10960 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.68-200470555204176/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.68-200470555204176/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883429.68-200470555204176/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_ouh2s_40/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_ouh2s_40/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:30:30,076 p=10960 u=root |  ...ignoring
2019-10-12 12:30:30,078 p=10960 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:30,078 p=10960 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:30:30,078 p=10960 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:30:30,080 p=10960 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:30:30,726 p=11019 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:30:30,734 p=11019 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:30:31,204 p=11019 u=root |  changed: [master]
2019-10-12 12:30:31,212 p=11019 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:30:31,232 p=11019 u=root |  ok: [master]
2019-10-12 12:30:31,239 p=11019 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:30:31,715 p=11019 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:30:32,025 p=11019 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:30:32,034 p=11019 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:30:33,194 p=11019 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.850988", "end": "2019-10-12 12:30:33.123692", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:30:32.272704", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:30:33,644 p=11019 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.182280", "end": "2019-10-12 12:30:33.580531", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:30:33.398251", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:30:33,646 p=11019 u=root |  ...ignoring
2019-10-12 12:30:33,649 p=11019 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:30:33,650 p=11019 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:33:50,938 p=11384 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:33:50,946 p=11384 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:33:50,986 p=11384 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:33:51,005 p=11384 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:33:51,035 p=11384 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:33:52,379 p=11384 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:33:52,382 p=11384 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:33:52,407 p=11384 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:33:52,457 p=11384 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:33:52,465 p=11384 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:33:53,817 p=11384 u=root |  ok: [master]
2019-10-12 12:33:53,845 p=11384 u=root |  ok: [worker1]
2019-10-12 12:33:53,879 p=11384 u=root |  ok: [worker2]
2019-10-12 12:33:53,884 p=11384 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:33:54,825 p=11384 u=root |  ok: [worker1]
2019-10-12 12:33:54,833 p=11384 u=root |  ok: [master]
2019-10-12 12:33:54,851 p=11384 u=root |  ok: [worker2]
2019-10-12 12:33:54,856 p=11384 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:33:57,174 p=11384 u=root |  ok: [worker1]
2019-10-12 12:33:57,258 p=11384 u=root |  ok: [worker2]
2019-10-12 12:33:57,296 p=11384 u=root |  ok: [master]
2019-10-12 12:33:57,304 p=11384 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:33:58,565 p=11384 u=root |  ok: [worker1]
2019-10-12 12:33:58,586 p=11384 u=root |  ok: [master]
2019-10-12 12:33:58,660 p=11384 u=root |  ok: [worker2]
2019-10-12 12:33:58,667 p=11384 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:33:59,367 p=11384 u=root |  ok: [worker1]
2019-10-12 12:33:59,398 p=11384 u=root |  ok: [master]
2019-10-12 12:33:59,413 p=11384 u=root |  ok: [worker2]
2019-10-12 12:33:59,419 p=11384 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:34:01,719 p=11384 u=root |  ok: [worker1]
2019-10-12 12:34:01,799 p=11384 u=root |  ok: [master]
2019-10-12 12:34:01,825 p=11384 u=root |  ok: [worker2]
2019-10-12 12:34:01,832 p=11384 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:34:02,988 p=11384 u=root |  ok: [worker1]
2019-10-12 12:34:03,050 p=11384 u=root |  ok: [master]
2019-10-12 12:34:03,114 p=11384 u=root |  ok: [worker2]
2019-10-12 12:34:03,123 p=11384 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:34:03,128 p=11384 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:34:04,174 p=11384 u=root |  ok: [master]
2019-10-12 12:34:04,178 p=11384 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:34:04,178 p=11384 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:04,178 p=11384 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:04,179 p=11384 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:04,837 p=11793 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:34:04,845 p=11793 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:34:05,610 p=11793 u=root |  ok: [worker2]
2019-10-12 12:34:05,614 p=11793 u=root |  ok: [worker1]
2019-10-12 12:34:05,618 p=11793 u=root |  ok: [master]
2019-10-12 12:34:05,625 p=11793 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:34:06,280 p=11793 u=root |  ok: [master]
2019-10-12 12:34:06,283 p=11793 u=root |  ok: [worker2]
2019-10-12 12:34:06,287 p=11793 u=root |  ok: [worker1]
2019-10-12 12:34:06,294 p=11793 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:34:07,169 p=11793 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:34:07,183 p=11793 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:34:07,186 p=11793 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:34:07,194 p=11793 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:34:07,863 p=11793 u=root |  ok: [worker1]
2019-10-12 12:34:07,867 p=11793 u=root |  ok: [master]
2019-10-12 12:34:07,873 p=11793 u=root |  ok: [worker2]
2019-10-12 12:34:07,876 p=11793 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:34:07,876 p=11793 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:07,876 p=11793 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:07,877 p=11793 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:08,514 p=11993 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:34:08,522 p=11993 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:34:09,763 p=11993 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.786402", "end": "2019-10-12 12:34:09.695732", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:34:08.909330", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 12:34:09,764 p=11993 u=root |  ...ignoring
2019-10-12 12:34:09,771 p=11993 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:34:10,250 p=11993 u=root |  ok: [master]
2019-10-12 12:34:10,258 p=11993 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:34:10,709 p=11993 u=root |  ok: [master]
2019-10-12 12:34:10,716 p=11993 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 12:34:12,317 p=11993 u=root |  changed: [master]
2019-10-12 12:34:12,320 p=11993 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:34:12,320 p=11993 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:34:12,903 p=12063 u=root |  ERROR! 'chdir' is not a valid attribute for a Task

The error appears to be in '/root/kubernetes_with_kubeadm/roles/deploy-metrics-server-for-HPA/tasks/main.yml': line 6, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


    - name: download metrics-server from kubernetes-incubator
      ^ here

This error can be suppressed as a warning using the "invalid_task_attribute_failed" configuration
2019-10-12 12:34:13,530 p=12069 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:34:13,538 p=12069 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:34:14,079 p=12069 u=root |  changed: [master]
2019-10-12 12:34:14,086 p=12069 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:34:14,107 p=12069 u=root |  ok: [master]
2019-10-12 12:34:14,118 p=12069 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:34:14,125 p=12069 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:34:14,567 p=12069 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.16-279103753135720/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.16-279103753135720/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.16-279103753135720/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_cjc__6vj/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_cjc__6vj/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:34:14,567 p=12069 u=root |  ...ignoring
2019-10-12 12:34:14,586 p=12069 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.18-234932363764918/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.18-234932363764918/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883654.18-234932363764918/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_fzzhjyai/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_fzzhjyai/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:34:14,586 p=12069 u=root |  ...ignoring
2019-10-12 12:34:14,588 p=12069 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:34:14,588 p=12069 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:34:14,589 p=12069 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:34:14,590 p=12069 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:34:15,232 p=12128 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:34:15,240 p=12128 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:34:15,707 p=12128 u=root |  changed: [master]
2019-10-12 12:34:15,714 p=12128 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:34:15,735 p=12128 u=root |  ok: [master]
2019-10-12 12:34:15,742 p=12128 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:34:16,211 p=12128 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:34:16,487 p=12128 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:34:16,495 p=12128 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:34:16,978 p=12128 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.184003", "end": "2019-10-12 12:34:16.905017", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:34:16.721014", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:34:17,444 p=12128 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.193903", "end": "2019-10-12 12:34:17.376323", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:34:17.182420", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:34:17,445 p=12128 u=root |  ...ignoring
2019-10-12 12:34:17,449 p=12128 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:34:17,450 p=12128 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:36:07,671 p=12492 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:36:07,679 p=12492 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:36:07,718 p=12492 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:36:07,732 p=12492 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:36:07,772 p=12492 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:36:09,144 p=12492 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:36:09,149 p=12492 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:36:09,153 p=12492 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:36:09,183 p=12492 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:36:09,192 p=12492 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:36:10,606 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:10,609 p=12492 u=root |  ok: [master]
2019-10-12 12:36:10,864 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:10,870 p=12492 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:36:11,807 p=12492 u=root |  ok: [master]
2019-10-12 12:36:11,821 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:11,852 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:11,859 p=12492 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:36:14,441 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:14,796 p=12492 u=root |  ok: [master]
2019-10-12 12:36:14,868 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:14,875 p=12492 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:36:16,160 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:16,177 p=12492 u=root |  ok: [master]
2019-10-12 12:36:16,263 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:16,269 p=12492 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:36:16,982 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:17,004 p=12492 u=root |  ok: [master]
2019-10-12 12:36:17,039 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:17,045 p=12492 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:36:19,314 p=12492 u=root |  ok: [master]
2019-10-12 12:36:19,344 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:19,481 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:19,487 p=12492 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:36:20,693 p=12492 u=root |  ok: [worker1]
2019-10-12 12:36:20,697 p=12492 u=root |  ok: [master]
2019-10-12 12:36:20,726 p=12492 u=root |  ok: [worker2]
2019-10-12 12:36:20,734 p=12492 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:36:20,740 p=12492 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:36:21,750 p=12492 u=root |  ok: [master]
2019-10-12 12:36:21,752 p=12492 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:21,753 p=12492 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:21,754 p=12492 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:21,754 p=12492 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:22,394 p=12901 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:36:22,403 p=12901 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:36:23,153 p=12901 u=root |  ok: [worker1]
2019-10-12 12:36:23,157 p=12901 u=root |  ok: [master]
2019-10-12 12:36:23,159 p=12901 u=root |  ok: [worker2]
2019-10-12 12:36:23,167 p=12901 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:36:23,805 p=12901 u=root |  ok: [worker1]
2019-10-12 12:36:23,807 p=12901 u=root |  ok: [master]
2019-10-12 12:36:23,813 p=12901 u=root |  ok: [worker2]
2019-10-12 12:36:23,820 p=12901 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:36:24,657 p=12901 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:36:24,689 p=12901 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:36:24,694 p=12901 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:36:24,701 p=12901 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:36:25,363 p=12901 u=root |  ok: [worker2]
2019-10-12 12:36:25,365 p=12901 u=root |  ok: [master]
2019-10-12 12:36:25,369 p=12901 u=root |  ok: [worker1]
2019-10-12 12:36:25,374 p=12901 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:25,374 p=12901 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:25,375 p=12901 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:25,375 p=12901 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:26,010 p=13101 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:36:26,018 p=13101 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:36:27,475 p=13101 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:01.002425", "end": "2019-10-12 12:36:27.402664", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:36:26.400239", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 12:36:27,476 p=13101 u=root |  ...ignoring
2019-10-12 12:36:27,483 p=13101 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:36:27,960 p=13101 u=root |  ok: [master]
2019-10-12 12:36:27,968 p=13101 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:36:28,419 p=13101 u=root |  ok: [master]
2019-10-12 12:36:28,427 p=13101 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 12:36:28,712 p=13101 u=root |  ok: [master]
2019-10-12 12:36:28,716 p=13101 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:28,716 p=13101 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:36:29,356 p=13171 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:36:29,365 p=13171 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:36:29,851 p=13171 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (git) module: chdir Supported parameters include: accept_hostkey, archive, bare, clone, depth, dest, executable, force, key_file, recursive, reference, refspec, remote, repo, separate_git_dir, ssh_opts, track_submodules, umask, update, verify_commit, version"}
2019-10-12 12:36:29,851 p=13171 u=root |  ...ignoring
2019-10-12 12:36:29,858 p=13171 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:36:30,497 p=13171 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (get_url) module: chdir Supported parameters include: attributes, backup, checksum, client_cert, client_key, content, delimiter, dest, directory_mode, follow, force, force_basic_auth, group, headers, http_agent, mode, owner, regexp, remote_src, selevel, serole, setype, seuser, sha256sum, src, timeout, tmp_dest, unsafe_writes, url, url_password, url_username, use_proxy, validate_certs"}
2019-10-12 12:36:30,500 p=13171 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:30,501 p=13171 u=root |  master                     : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 12:36:31,140 p=13211 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:36:31,149 p=13211 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:36:31,681 p=13211 u=root |  changed: [master]
2019-10-12 12:36:31,689 p=13211 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:36:31,710 p=13211 u=root |  ok: [master]
2019-10-12 12:36:31,720 p=13211 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:36:31,727 p=13211 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:36:32,188 p=13211 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.76-198744897428989/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.76-198744897428989/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.76-198744897428989/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_csm3sv4_/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_csm3sv4_/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:36:32,189 p=13211 u=root |  ...ignoring
2019-10-12 12:36:32,192 p=13211 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.78-148548312114576/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.78-148548312114576/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883791.78-148548312114576/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_nayvtnbb/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_nayvtnbb/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:36:32,192 p=13211 u=root |  ...ignoring
2019-10-12 12:36:32,196 p=13211 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:32,196 p=13211 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:36:32,196 p=13211 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:36:32,197 p=13211 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:36:32,838 p=13270 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:36:32,846 p=13270 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:36:33,321 p=13270 u=root |  changed: [master]
2019-10-12 12:36:33,328 p=13270 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:36:33,348 p=13270 u=root |  ok: [master]
2019-10-12 12:36:33,355 p=13270 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:36:33,819 p=13270 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:36:34,092 p=13270 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:36:34,101 p=13270 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:36:34,583 p=13270 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.183644", "end": "2019-10-12 12:36:34.505383", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:36:34.321739", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:36:35,023 p=13270 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.172217", "end": "2019-10-12 12:36:34.949873", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:36:34.777656", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:36:35,024 p=13270 u=root |  ...ignoring
2019-10-12 12:36:35,028 p=13270 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:36:35,028 p=13270 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:37:50,357 p=13635 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:37:50,365 p=13635 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:37:50,406 p=13635 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:37:50,424 p=13635 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:37:50,458 p=13635 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:37:51,785 p=13635 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:37:51,788 p=13635 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:37:51,822 p=13635 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:37:51,864 p=13635 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:37:51,873 p=13635 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:37:53,228 p=13635 u=root |  ok: [master]
2019-10-12 12:37:53,246 p=13635 u=root |  ok: [worker1]
2019-10-12 12:37:53,365 p=13635 u=root |  ok: [worker2]
2019-10-12 12:37:53,372 p=13635 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:37:54,353 p=13635 u=root |  ok: [master]
2019-10-12 12:37:54,355 p=13635 u=root |  ok: [worker1]
2019-10-12 12:37:54,360 p=13635 u=root |  ok: [worker2]
2019-10-12 12:37:54,368 p=13635 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:37:56,966 p=13635 u=root |  ok: [master]
2019-10-12 12:37:56,969 p=13635 u=root |  ok: [worker1]
2019-10-12 12:37:57,006 p=13635 u=root |  ok: [worker2]
2019-10-12 12:37:57,013 p=13635 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:37:58,293 p=13635 u=root |  ok: [worker1]
2019-10-12 12:37:58,318 p=13635 u=root |  ok: [master]
2019-10-12 12:37:58,375 p=13635 u=root |  ok: [worker2]
2019-10-12 12:37:58,382 p=13635 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:37:59,123 p=13635 u=root |  ok: [worker1]
2019-10-12 12:37:59,150 p=13635 u=root |  ok: [worker2]
2019-10-12 12:37:59,153 p=13635 u=root |  ok: [master]
2019-10-12 12:37:59,161 p=13635 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:38:01,456 p=13635 u=root |  ok: [master]
2019-10-12 12:38:01,490 p=13635 u=root |  ok: [worker1]
2019-10-12 12:38:01,566 p=13635 u=root |  ok: [worker2]
2019-10-12 12:38:01,573 p=13635 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:38:02,830 p=13635 u=root |  ok: [worker1]
2019-10-12 12:38:02,838 p=13635 u=root |  ok: [master]
2019-10-12 12:38:02,858 p=13635 u=root |  ok: [worker2]
2019-10-12 12:38:02,868 p=13635 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:38:02,873 p=13635 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:38:03,906 p=13635 u=root |  ok: [master]
2019-10-12 12:38:03,908 p=13635 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:03,910 p=13635 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:03,910 p=13635 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:03,911 p=13635 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:04,554 p=14044 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:38:04,563 p=14044 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:38:05,304 p=14044 u=root |  ok: [master]
2019-10-12 12:38:05,306 p=14044 u=root |  ok: [worker2]
2019-10-12 12:38:05,310 p=14044 u=root |  ok: [worker1]
2019-10-12 12:38:05,317 p=14044 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:38:05,952 p=14044 u=root |  ok: [master]
2019-10-12 12:38:05,956 p=14044 u=root |  ok: [worker1]
2019-10-12 12:38:05,957 p=14044 u=root |  ok: [worker2]
2019-10-12 12:38:05,965 p=14044 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:38:06,820 p=14044 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:38:06,825 p=14044 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:38:06,846 p=14044 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:38:06,853 p=14044 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:38:07,529 p=14044 u=root |  ok: [master]
2019-10-12 12:38:07,532 p=14044 u=root |  ok: [worker2]
2019-10-12 12:38:07,535 p=14044 u=root |  ok: [worker1]
2019-10-12 12:38:07,540 p=14044 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:07,540 p=14044 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:07,541 p=14044 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:07,541 p=14044 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:08,181 p=14244 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:38:08,190 p=14244 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:38:09,334 p=14244 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.694687", "end": "2019-10-12 12:38:09.259755", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:38:08.565068", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 12:38:09,334 p=14244 u=root |  ...ignoring
2019-10-12 12:38:09,342 p=14244 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:38:09,812 p=14244 u=root |  ok: [master]
2019-10-12 12:38:09,819 p=14244 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:38:10,275 p=14244 u=root |  ok: [master]
2019-10-12 12:38:10,283 p=14244 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 12:38:10,575 p=14244 u=root |  ok: [master]
2019-10-12 12:38:10,579 p=14244 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:10,579 p=14244 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:38:11,200 p=14314 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:38:11,208 p=14314 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:38:11,721 p=14314 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:38:11,721 p=14314 u=root |  ...ignoring
2019-10-12 12:38:11,728 p=14314 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:38:12,870 p=14314 u=root |  ok: [master]
2019-10-12 12:38:12,879 p=14314 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 12:38:13,328 p=14314 u=root |  ok: [master]
2019-10-12 12:38:13,332 p=14314 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:13,333 p=14314 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:38:13,974 p=14370 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:38:13,983 p=14370 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:38:14,514 p=14370 u=root |  changed: [master]
2019-10-12 12:38:14,522 p=14370 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:38:14,542 p=14370 u=root |  ok: [master]
2019-10-12 12:38:14,552 p=14370 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:38:14,560 p=14370 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:38:14,988 p=14370 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.6-273454013036188/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.6-273454013036188/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.6-273454013036188/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_7yr72ssr/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_7yr72ssr/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:38:14,988 p=14370 u=root |  ...ignoring
2019-10-12 12:38:15,013 p=14370 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.62-88393165163491/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.62-88393165163491/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570883894.62-88393165163491/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload__iw7c5or/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload__iw7c5or/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:38:15,013 p=14370 u=root |  ...ignoring
2019-10-12 12:38:15,015 p=14370 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:15,015 p=14370 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:38:15,018 p=14370 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:38:15,018 p=14370 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:38:15,678 p=14429 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:38:15,686 p=14429 u=root |  TASK [Get Master Node's IP] *************************************************************
2019-10-12 12:38:16,157 p=14429 u=root |  changed: [master]
2019-10-12 12:38:16,165 p=14429 u=root |  TASK [Set Master Node's IP] *************************************************************
2019-10-12 12:38:16,185 p=14429 u=root |  ok: [master]
2019-10-12 12:38:16,192 p=14429 u=root |  TASK [Changing External IP] *************************************************************
2019-10-12 12:38:16,651 p=14429 u=root |  ok: [master] => (item=/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:38:16,916 p=14429 u=root |  ok: [master] => (item=/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml)
2019-10-12 12:38:16,924 p=14429 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:38:17,410 p=14429 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.189067", "end": "2019-10-12 12:38:17.329434", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:38:17.140367", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"blue\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/blue/nginx_php-fpm_multicontainer_service.yaml\": services \"blue\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:38:17,865 p=14429 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.181771", "end": "2019-10-12 12:38:17.791405", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:38:17.609634", "stderr": "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists\nError from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists", "stderr_lines": ["Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_deployment.yaml\": deployments.apps \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_hpa.yaml\": horizontalpodautoscalers.autoscaling \"green\" already exists", "Error from server (AlreadyExists): error when creating \"/home/kube/kubernetes/green/nginx_php-fpm_multicontainer_service.yaml\": services \"green\" already exists"], "stdout": "", "stdout_lines": []}
2019-10-12 12:38:17,867 p=14429 u=root |  ...ignoring
2019-10-12 12:38:17,871 p=14429 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:38:17,871 p=14429 u=root |  master                     : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:46:38,541 p=14895 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:46:38,550 p=14895 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 12:46:38,586 p=14895 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:46:38,606 p=14895 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:46:38,640 p=14895 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 12:46:39,975 p=14895 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:46:39,984 p=14895 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 12:46:39,986 p=14895 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:46:40,059 p=14895 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 12:46:40,069 p=14895 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 12:46:41,623 p=14895 u=root |  ok: [master]
2019-10-12 12:46:41,626 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:41,650 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:41,656 p=14895 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 12:46:42,590 p=14895 u=root |  ok: [master]
2019-10-12 12:46:42,621 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:42,624 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:42,631 p=14895 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 12:46:47,319 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:47,419 p=14895 u=root |  ok: [master]
2019-10-12 12:46:47,559 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:47,566 p=14895 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 12:46:48,863 p=14895 u=root |  ok: [master]
2019-10-12 12:46:49,043 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:49,187 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:49,194 p=14895 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 12:46:49,939 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:49,979 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:49,982 p=14895 u=root |  ok: [master]
2019-10-12 12:46:49,989 p=14895 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 12:46:52,257 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:52,339 p=14895 u=root |  ok: [master]
2019-10-12 12:46:52,394 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:52,401 p=14895 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 12:46:53,570 p=14895 u=root |  ok: [worker1]
2019-10-12 12:46:53,636 p=14895 u=root |  ok: [worker2]
2019-10-12 12:46:53,707 p=14895 u=root |  ok: [master]
2019-10-12 12:46:53,717 p=14895 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:46:53,722 p=14895 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 12:46:54,747 p=14895 u=root |  ok: [master]
2019-10-12 12:46:54,749 p=14895 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:46:54,750 p=14895 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:54,752 p=14895 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:54,752 p=14895 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:55,386 p=15304 u=root |  PLAY [all] ******************************************************************************
2019-10-12 12:46:55,394 p=15304 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 12:46:56,132 p=15304 u=root |  ok: [worker1]
2019-10-12 12:46:56,134 p=15304 u=root |  ok: [master]
2019-10-12 12:46:56,140 p=15304 u=root |  ok: [worker2]
2019-10-12 12:46:56,145 p=15304 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 12:46:56,780 p=15304 u=root |  ok: [worker2]
2019-10-12 12:46:56,783 p=15304 u=root |  ok: [worker1]
2019-10-12 12:46:56,787 p=15304 u=root |  ok: [master]
2019-10-12 12:46:56,795 p=15304 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 12:46:57,628 p=15304 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:46:57,654 p=15304 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:46:57,656 p=15304 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 12:46:57,666 p=15304 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 12:46:58,322 p=15304 u=root |  ok: [worker1]
2019-10-12 12:46:58,324 p=15304 u=root |  ok: [worker2]
2019-10-12 12:46:58,329 p=15304 u=root |  ok: [master]
2019-10-12 12:46:58,333 p=15304 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:46:58,334 p=15304 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:58,334 p=15304 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:58,334 p=15304 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:46:58,978 p=15504 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:46:58,986 p=15504 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 12:47:00,743 p=15504 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:01.309388", "end": "2019-10-12 12:47:00.648383", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 12:46:59.338995", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 12:47:00,743 p=15504 u=root |  ...ignoring
2019-10-12 12:47:00,751 p=15504 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 12:47:01,231 p=15504 u=root |  ok: [master]
2019-10-12 12:47:01,239 p=15504 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 12:47:01,708 p=15504 u=root |  ok: [master]
2019-10-12 12:47:01,716 p=15504 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 12:47:02,019 p=15504 u=root |  ok: [master]
2019-10-12 12:47:02,023 p=15504 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:47:02,024 p=15504 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:47:02,666 p=15574 u=root |  PLAY [master] ***************************************************************************
2019-10-12 12:47:02,674 p=15574 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 12:47:03,210 p=15574 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 12:47:03,211 p=15574 u=root |  ...ignoring
2019-10-12 12:47:03,217 p=15574 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 12:47:04,344 p=15574 u=root |  ok: [master]
2019-10-12 12:47:04,352 p=15574 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 12:47:04,800 p=15574 u=root |  ok: [master]
2019-10-12 12:47:04,804 p=15574 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:47:04,804 p=15574 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:47:05,446 p=15630 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:47:05,455 p=15630 u=root |  TASK [get join command] *****************************************************************
2019-10-12 12:47:05,995 p=15630 u=root |  changed: [master]
2019-10-12 12:47:06,004 p=15630 u=root |  TASK [set join command] *****************************************************************
2019-10-12 12:47:06,025 p=15630 u=root |  ok: [master]
2019-10-12 12:47:06,035 p=15630 u=root |  PLAY [workers] **************************************************************************
2019-10-12 12:47:06,042 p=15630 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 12:47:06,476 p=15630 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.08-71863258765497/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.08-71863258765497/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.08-71863258765497/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_7nrpkybs/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_7nrpkybs/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:47:06,476 p=15630 u=root |  ...ignoring
2019-10-12 12:47:06,497 p=15630 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.1-189406248054099/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.1-189406248054099/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570884426.1-189406248054099/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_9wfjwsm3/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_9wfjwsm3/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 12:47:06,498 p=15630 u=root |  ...ignoring
2019-10-12 12:47:06,500 p=15630 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:47:06,500 p=15630 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 12:47:06,500 p=15630 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:47:06,502 p=15630 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 12:47:07,146 p=15689 u=root |  PLAY [masters] **************************************************************************
2019-10-12 12:47:07,154 p=15689 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 12:47:07,794 p=15689 u=root |  changed: [master] => (item=blue)
2019-10-12 12:47:08,198 p=15689 u=root |  changed: [master] => (item=green)
2019-10-12 12:47:08,206 p=15689 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 12:47:08,723 p=15689 u=root |  changed: [master] => (item=/home/kube/kubernetes/blue/)
2019-10-12 12:47:09,214 p=15689 u=root |  changed: [master] => (item=/home/kube/kubernetes/green/)
2019-10-12 12:47:09,219 p=15689 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 12:47:09,219 p=15689 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:11,484 p=16130 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:04:11,493 p=16130 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:04:11,534 p=16130 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:04:11,552 p=16130 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:04:11,590 p=16130 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:04:12,983 p=16130 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:04:12,989 p=16130 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:04:13,022 p=16130 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:04:13,026 p=16130 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:04:13,036 p=16130 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:04:14,448 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:14,451 p=16130 u=root |  ok: [master]
2019-10-12 13:04:14,524 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:14,531 p=16130 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:04:15,487 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:15,505 p=16130 u=root |  ok: [master]
2019-10-12 13:04:15,508 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:15,514 p=16130 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:04:19,604 p=16130 u=root |  ok: [master]
2019-10-12 13:04:19,820 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:19,901 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:19,908 p=16130 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:04:21,196 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:21,198 p=16130 u=root |  ok: [master]
2019-10-12 13:04:21,412 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:21,419 p=16130 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:04:22,161 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:22,164 p=16130 u=root |  ok: [master]
2019-10-12 13:04:22,182 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:22,188 p=16130 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:04:24,512 p=16130 u=root |  ok: [master]
2019-10-12 13:04:24,549 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:24,600 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:24,607 p=16130 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:04:25,766 p=16130 u=root |  ok: [master]
2019-10-12 13:04:25,804 p=16130 u=root |  ok: [worker1]
2019-10-12 13:04:25,843 p=16130 u=root |  ok: [worker2]
2019-10-12 13:04:25,852 p=16130 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:04:25,857 p=16130 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 13:04:26,874 p=16130 u=root |  ok: [master]
2019-10-12 13:04:26,878 p=16130 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:26,878 p=16130 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:26,879 p=16130 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:26,879 p=16130 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:27,519 p=16539 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:04:27,528 p=16539 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:04:28,272 p=16539 u=root |  ok: [master]
2019-10-12 13:04:28,277 p=16539 u=root |  ok: [worker2]
2019-10-12 13:04:28,277 p=16539 u=root |  ok: [worker1]
2019-10-12 13:04:28,286 p=16539 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 13:04:28,933 p=16539 u=root |  ok: [worker2]
2019-10-12 13:04:28,935 p=16539 u=root |  ok: [worker1]
2019-10-12 13:04:28,939 p=16539 u=root |  ok: [master]
2019-10-12 13:04:28,947 p=16539 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 13:04:29,804 p=16539 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:04:29,814 p=16539 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:04:29,831 p=16539 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:04:29,839 p=16539 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 13:04:30,519 p=16539 u=root |  ok: [worker2]
2019-10-12 13:04:30,522 p=16539 u=root |  ok: [master]
2019-10-12 13:04:30,524 p=16539 u=root |  ok: [worker1]
2019-10-12 13:04:30,530 p=16539 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:30,530 p=16539 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:30,531 p=16539 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:30,531 p=16539 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:31,178 p=16739 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:04:31,186 p=16739 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:04:32,626 p=16739 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.979737", "end": "2019-10-12 13:04:32.539327", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:04:31.559590", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:04:32,626 p=16739 u=root |  ...ignoring
2019-10-12 13:04:32,633 p=16739 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 13:04:33,120 p=16739 u=root |  ok: [master]
2019-10-12 13:04:33,128 p=16739 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 13:04:33,576 p=16739 u=root |  ok: [master]
2019-10-12 13:04:33,584 p=16739 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 13:04:33,866 p=16739 u=root |  ok: [master]
2019-10-12 13:04:33,870 p=16739 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:33,870 p=16739 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:04:34,509 p=16809 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:04:34,517 p=16809 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:04:35,031 p=16809 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 13:04:35,032 p=16809 u=root |  ...ignoring
2019-10-12 13:04:35,039 p=16809 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 13:04:36,202 p=16809 u=root |  ok: [master]
2019-10-12 13:04:36,210 p=16809 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 13:04:36,657 p=16809 u=root |  ok: [master]
2019-10-12 13:04:36,661 p=16809 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:36,661 p=16809 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:04:37,293 p=16865 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:04:37,301 p=16865 u=root |  TASK [get join command] *****************************************************************
2019-10-12 13:04:37,832 p=16865 u=root |  changed: [master]
2019-10-12 13:04:37,840 p=16865 u=root |  TASK [set join command] *****************************************************************
2019-10-12 13:04:37,861 p=16865 u=root |  ok: [master]
2019-10-12 13:04:37,870 p=16865 u=root |  PLAY [workers] **************************************************************************
2019-10-12 13:04:37,877 p=16865 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 13:04:38,318 p=16865 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.91-37946189564603/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.91-37946189564603/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.91-37946189564603/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_2okcvr8f/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_2okcvr8f/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:04:38,319 p=16865 u=root |  ...ignoring
2019-10-12 13:04:38,322 p=16865 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.93-36597095293176/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.93-36597095293176/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885477.93-36597095293176/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_l_i0vtj0/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_l_i0vtj0/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:04:38,322 p=16865 u=root |  ...ignoring
2019-10-12 13:04:38,324 p=16865 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:38,324 p=16865 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:04:38,325 p=16865 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:04:38,325 p=16865 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:04:38,950 p=16924 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:04:38,958 p=16924 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:04:39,464 p=16924 u=root |  fatal: [master]: FAILED! => {"before": "72070143d24e44dafae0d4a83e177cddaf0892e4", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 13:04:39,464 p=16924 u=root |  ...ignoring
2019-10-12 13:04:39,471 p=16924 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:04:41,326 p=16924 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "cd /home/kube/kubernetes && git pull https://github.com/hiakki/kubernetes.git", "delta": "0:00:01.403784", "end": "2019-10-12 13:04:41.240379", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:04:39.836595", "stderr": "From https://github.com/hiakki/kubernetes\n * branch            HEAD       -> FETCH_HEAD\nerror: Your local changes to the following files would be overwritten by merge:\n\tgreen/nginx_php-fpm_multicontainer_service.yaml\nPlease commit your changes or stash them before you merge.\nAborting", "stderr_lines": ["From https://github.com/hiakki/kubernetes", " * branch            HEAD       -> FETCH_HEAD", "error: Your local changes to the following files would be overwritten by merge:", "\tgreen/nginx_php-fpm_multicontainer_service.yaml", "Please commit your changes or stash them before you merge.", "Aborting"], "stdout": "Updating 7207014..b99e15c", "stdout_lines": ["Updating 7207014..b99e15c"]}
2019-10-12 13:04:41,330 p=16924 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:41,330 p=16924 u=root |  master                     : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 13:04:41,961 p=16964 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:04:41,969 p=16964 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 13:04:42,594 p=16964 u=root |  changed: [master] => (item=blue)
2019-10-12 13:04:42,992 p=16964 u=root |  changed: [master] => (item=green)
2019-10-12 13:04:43,001 p=16964 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 13:04:43,511 p=16964 u=root |  changed: [master] => (item=/home/kube/kubernetes/blue/)
2019-10-12 13:04:43,987 p=16964 u=root |  changed: [master] => (item=/home/kube/kubernetes/green/)
2019-10-12 13:04:43,991 p=16964 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:04:43,992 p=16964 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:29,299 p=17300 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:05:29,307 p=17300 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:05:29,346 p=17300 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:05:29,365 p=17300 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:05:29,396 p=17300 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:05:30,765 p=17300 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:05:30,773 p=17300 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:05:30,774 p=17300 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:05:30,800 p=17300 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:05:30,809 p=17300 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:05:32,143 p=17300 u=root |  ok: [master]
2019-10-12 13:05:32,171 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:32,296 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:32,303 p=17300 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:05:33,238 p=17300 u=root |  ok: [master]
2019-10-12 13:05:33,270 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:33,275 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:33,281 p=17300 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:05:35,593 p=17300 u=root |  ok: [master]
2019-10-12 13:05:35,787 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:35,826 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:35,832 p=17300 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:05:37,092 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:37,109 p=17300 u=root |  ok: [master]
2019-10-12 13:05:37,204 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:37,211 p=17300 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:05:37,933 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:37,958 p=17300 u=root |  ok: [master]
2019-10-12 13:05:37,965 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:37,971 p=17300 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:05:40,218 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:40,256 p=17300 u=root |  ok: [master]
2019-10-12 13:05:40,386 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:40,393 p=17300 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:05:41,594 p=17300 u=root |  ok: [worker1]
2019-10-12 13:05:41,597 p=17300 u=root |  ok: [master]
2019-10-12 13:05:41,627 p=17300 u=root |  ok: [worker2]
2019-10-12 13:05:41,635 p=17300 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:05:41,640 p=17300 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 13:05:42,652 p=17300 u=root |  ok: [master]
2019-10-12 13:05:42,656 p=17300 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:42,656 p=17300 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:42,656 p=17300 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:42,657 p=17300 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:43,294 p=17709 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:05:43,302 p=17709 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:05:44,033 p=17709 u=root |  ok: [worker1]
2019-10-12 13:05:44,040 p=17709 u=root |  ok: [worker2]
2019-10-12 13:05:44,043 p=17709 u=root |  ok: [master]
2019-10-12 13:05:44,050 p=17709 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 13:05:44,678 p=17709 u=root |  ok: [worker1]
2019-10-12 13:05:44,683 p=17709 u=root |  ok: [worker2]
2019-10-12 13:05:44,684 p=17709 u=root |  ok: [master]
2019-10-12 13:05:44,692 p=17709 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 13:05:45,544 p=17709 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:05:45,550 p=17709 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:05:45,552 p=17709 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:05:45,561 p=17709 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 13:05:46,214 p=17709 u=root |  ok: [worker1]
2019-10-12 13:05:46,216 p=17709 u=root |  ok: [worker2]
2019-10-12 13:05:46,220 p=17709 u=root |  ok: [master]
2019-10-12 13:05:46,225 p=17709 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:46,225 p=17709 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:46,226 p=17709 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:46,226 p=17709 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:46,851 p=17909 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:05:46,859 p=17909 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:05:47,992 p=17909 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:00.681061", "end": "2019-10-12 13:05:47.908597", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:05:47.227536", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:05:47,992 p=17909 u=root |  ...ignoring
2019-10-12 13:05:48,000 p=17909 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 13:05:48,475 p=17909 u=root |  ok: [master]
2019-10-12 13:05:48,483 p=17909 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 13:05:48,937 p=17909 u=root |  ok: [master]
2019-10-12 13:05:48,945 p=17909 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 13:05:49,234 p=17909 u=root |  ok: [master]
2019-10-12 13:05:49,237 p=17909 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:49,237 p=17909 u=root |  master                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:05:49,881 p=17979 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:05:49,889 p=17979 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:05:50,404 p=17979 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 13:05:50,404 p=17979 u=root |  ...ignoring
2019-10-12 13:05:50,410 p=17979 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 13:05:51,305 p=17979 u=root |  ok: [master]
2019-10-12 13:05:51,313 p=17979 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 13:05:51,769 p=17979 u=root |  ok: [master]
2019-10-12 13:05:51,773 p=17979 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:51,773 p=17979 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:05:52,408 p=18035 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:05:52,416 p=18035 u=root |  TASK [get join command] *****************************************************************
2019-10-12 13:05:52,942 p=18035 u=root |  changed: [master]
2019-10-12 13:05:52,950 p=18035 u=root |  TASK [set join command] *****************************************************************
2019-10-12 13:05:52,970 p=18035 u=root |  ok: [master]
2019-10-12 13:05:52,979 p=18035 u=root |  PLAY [workers] **************************************************************************
2019-10-12 13:05:52,986 p=18035 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 13:05:53,427 p=18035 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.81 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.02-154461004753191/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.02-154461004753191/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.02-154461004753191/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_zt7p_wor/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_zt7p_wor/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:05:53,427 p=18035 u=root |  ...ignoring
2019-10-12 13:05:53,431 p=18035 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.161 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.04-203581256681167/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.04-203581256681167/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570885553.04-203581256681167/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_sw2dvjrw/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_sw2dvjrw/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:05:53,431 p=18035 u=root |  ...ignoring
2019-10-12 13:05:53,434 p=18035 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:53,435 p=18035 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:53,435 p=18035 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:05:53,435 p=18035 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:05:54,078 p=18094 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:05:54,086 p=18094 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:05:56,014 p=18094 u=root |  changed: [master]
2019-10-12 13:05:56,022 p=18094 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:05:57,111 p=18094 u=root |  changed: [master]
2019-10-12 13:05:57,114 p=18094 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:57,115 p=18094 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:05:57,752 p=18134 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:05:57,760 p=18134 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 13:05:58,368 p=18134 u=root |  changed: [master] => (item=blue)
2019-10-12 13:05:58,769 p=18134 u=root |  changed: [master] => (item=green)
2019-10-12 13:05:58,777 p=18134 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 13:05:59,239 p=18134 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.159336", "end": "2019-10-12 13:05:59.140894", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:05:58.981558", "stderr": "The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/blue created\nhorizontalpodautoscaler.autoscaling/blue created", "stdout_lines": ["deployment.apps/blue created", "horizontalpodautoscaler.autoscaling/blue created"]}
2019-10-12 13:05:59,664 p=18134 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.160621", "end": "2019-10-12 13:05:59.581719", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:05:59.421098", "stderr": "The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/green created\nhorizontalpodautoscaler.autoscaling/green created", "stdout_lines": ["deployment.apps/green created", "horizontalpodautoscaler.autoscaling/green created"]}
2019-10-12 13:05:59,666 p=18134 u=root |  ...ignoring
2019-10-12 13:05:59,669 p=18134 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:05:59,670 p=18134 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:22:12,101 p=18685 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:22:12,109 p=18685 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:22:12,142 p=18685 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:12,168 p=18685 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:12,203 p=18685 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:22,231 p=18685 u=root |  failed: [worker1] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: Connection timed out", "unreachable": true}
2019-10-12 13:22:22,235 p=18685 u=root |  fatal: [worker1]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: Connection timed out", "unreachable": true}]}
2019-10-12 13:22:22,250 p=18685 u=root |  failed: [worker2] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: Connection timed out", "unreachable": true}
2019-10-12 13:22:22,252 p=18685 u=root |  fatal: [worker2]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: Connection timed out", "unreachable": true}]}
2019-10-12 13:22:22,261 p=18685 u=root |  failed: [master] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: Connection timed out", "unreachable": true}
2019-10-12 13:22:22,262 p=18685 u=root |  fatal: [master]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: Connection timed out", "unreachable": true}]}
2019-10-12 13:22:22,264 p=18685 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:22:22,264 p=18685 u=root |  master                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:22,264 p=18685 u=root |  worker1                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:22,264 p=18685 u=root |  worker2                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:22,911 p=18709 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:22:22,920 p=18709 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:22:26,068 p=18709 u=root |  fatal: [worker1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:26,099 p=18709 u=root |  fatal: [master]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:26,100 p=18709 u=root |  fatal: [worker2]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:26,105 p=18709 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:22:26,105 p=18709 u=root |  master                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:26,105 p=18709 u=root |  worker1                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:26,105 p=18709 u=root |  worker2                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:26,758 p=18732 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:22:26,767 p=18732 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:22:29,172 p=18732 u=root |  fatal: [master]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:29,175 p=18732 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:22:29,175 p=18732 u=root |  master                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:29,826 p=18745 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:22:29,834 p=18745 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:22:31,298 p=18745 u=root |   [ERROR]: User interrupted execution

2019-10-12 13:22:53,550 p=19089 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:22:53,558 p=19089 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:22:53,595 p=19089 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:53,618 p=19089 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:53,655 p=19089 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:22:56,775 p=19089 u=root |  failed: [master] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:56,777 p=19089 u=root |  fatal: [master]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: No route to host", "unreachable": true}]}
2019-10-12 13:22:56,777 p=19089 u=root |  failed: [worker2] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:56,778 p=19089 u=root |  fatal: [worker2]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: No route to host", "unreachable": true}]}
2019-10-12 13:22:56,779 p=19089 u=root |  failed: [worker1] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:56,779 p=19089 u=root |  fatal: [worker1]: UNREACHABLE! => {"changed": false, "msg": "All items completed", "results": [{"ansible_loop_var": "item", "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: No route to host", "unreachable": true}]}
2019-10-12 13:22:56,780 p=19089 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:22:56,781 p=19089 u=root |  master                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:56,781 p=19089 u=root |  worker1                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:56,781 p=19089 u=root |  worker2                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:57,415 p=19112 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:22:57,424 p=19112 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:22:59,836 p=19112 u=root |  fatal: [worker2]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.161 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:59,837 p=19112 u=root |  fatal: [master]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.80 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:59,838 p=19112 u=root |  fatal: [worker1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.1.81 port 21: No route to host", "unreachable": true}
2019-10-12 13:22:59,839 p=19112 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:22:59,839 p=19112 u=root |  master                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:59,839 p=19112 u=root |  worker1                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:22:59,840 p=19112 u=root |  worker2                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:23:00,489 p=19135 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:23:00,497 p=19135 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:23:00,749 p=19135 u=root |   [ERROR]: User interrupted execution

2019-10-12 13:23:31,089 p=19425 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:23:31,097 p=19425 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:23:31,134 p=19425 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:23:31,159 p=19425 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:23:31,187 p=19425 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:23:36,825 p=19425 u=root |  changed: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:23:36,830 p=19425 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:23:37,177 p=19425 u=root |  changed: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:23:37,407 p=19425 u=root |  changed: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:23:37,418 p=19425 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:23:38,960 p=19425 u=root |  changed: [worker1]
2019-10-12 13:23:38,965 p=19425 u=root |  changed: [master]
2019-10-12 13:23:39,024 p=19425 u=root |  changed: [worker2]
2019-10-12 13:23:39,031 p=19425 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:23:44,483 p=19425 u=root |  changed: [master]
2019-10-12 13:23:44,533 p=19425 u=root |  changed: [worker2]
2019-10-12 13:23:44,540 p=19425 u=root |  changed: [worker1]
2019-10-12 13:23:44,547 p=19425 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:24:05,270 p=19425 u=root |  changed: [master]
2019-10-12 13:24:07,902 p=19425 u=root |  changed: [worker1]
2019-10-12 13:24:08,758 p=19425 u=root |  changed: [worker2]
2019-10-12 13:24:08,765 p=19425 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:24:10,204 p=19425 u=root |  changed: [master]
2019-10-12 13:24:10,413 p=19425 u=root |  changed: [worker1]
2019-10-12 13:24:11,062 p=19425 u=root |  changed: [worker2]
2019-10-12 13:24:11,068 p=19425 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:24:17,268 p=19425 u=root |  changed: [worker1]
2019-10-12 13:24:17,481 p=19425 u=root |  changed: [master]
2019-10-12 13:24:17,588 p=19425 u=root |  changed: [worker2]
2019-10-12 13:24:17,595 p=19425 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:24:30,948 p=19425 u=root |  changed: [master]
2019-10-12 13:24:31,616 p=19425 u=root |  changed: [worker1]
2019-10-12 13:24:32,293 p=19425 u=root |  changed: [worker2]
2019-10-12 13:24:32,300 p=19425 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:24:41,621 p=19425 u=root |  changed: [master]
2019-10-12 13:24:42,838 p=19425 u=root |  changed: [worker2]
2019-10-12 13:24:43,301 p=19425 u=root |  changed: [worker1]
2019-10-12 13:24:43,311 p=19425 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:24:43,317 p=19425 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 13:24:44,329 p=19425 u=root |  ok: [master]
2019-10-12 13:24:44,331 p=19425 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:24:44,333 p=19425 u=root |  master                     : ok=9    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:44,333 p=19425 u=root |  worker1                    : ok=8    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:44,334 p=19425 u=root |  worker2                    : ok=8    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:44,984 p=19834 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:24:44,993 p=19834 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:24:45,866 p=19834 u=root |  changed: [master]
2019-10-12 13:24:45,905 p=19834 u=root |  changed: [worker1]
2019-10-12 13:24:45,913 p=19834 u=root |  changed: [worker2]
2019-10-12 13:24:45,919 p=19834 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 13:24:46,544 p=19834 u=root |  changed: [master]
2019-10-12 13:24:46,569 p=19834 u=root |  changed: [worker1]
2019-10-12 13:24:46,573 p=19834 u=root |  changed: [worker2]
2019-10-12 13:24:46,580 p=19834 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 13:24:47,412 p=19834 u=root |  changed: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:24:47,486 p=19834 u=root |  changed: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:24:47,505 p=19834 u=root |  changed: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:24:47,512 p=19834 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 13:24:48,171 p=19834 u=root |  changed: [master]
2019-10-12 13:24:48,173 p=19834 u=root |  changed: [worker2]
2019-10-12 13:24:48,177 p=19834 u=root |  changed: [worker1]
2019-10-12 13:24:48,181 p=19834 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:24:48,181 p=19834 u=root |  master                     : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:48,182 p=19834 u=root |  worker1                    : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:48,182 p=19834 u=root |  worker2                    : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:48,819 p=20034 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:24:48,828 p=20034 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:24:50,794 p=20034 u=root |   [WARNING]: Module remote_tmp /home/kube/.ansible/tmp did not exist and was created with
a mode of 0700, this may cause issues when running as another user. To avoid this,
create the remote_tmp dir with the correct permissions manually

2019-10-12 13:24:50,797 p=20034 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:01.508714", "end": "2019-10-12 13:24:50.758303", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:24:49.249589", "stderr": "error execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR IsPrivilegedUser]: user is not running as root\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR IsPrivilegedUser]: user is not running as root", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:24:50,797 p=20034 u=root |  ...ignoring
2019-10-12 13:24:50,804 p=20034 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 13:24:51,285 p=20034 u=root |  changed: [master]
2019-10-12 13:24:51,294 p=20034 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 13:24:51,740 p=20034 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /etc/kubernetes/admin.conf not found"}
2019-10-12 13:24:51,744 p=20034 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:24:51,744 p=20034 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 13:24:52,373 p=20088 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:24:52,381 p=20088 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:24:57,451 p=20088 u=root |  changed: [master]
2019-10-12 13:24:57,458 p=20088 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 13:24:58,631 p=20088 u=root |  changed: [master]
2019-10-12 13:24:58,639 p=20088 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 13:24:59,141 p=20088 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f /home/kube/metrics-server/deploy/1.8+/ >> deploy-metrics-server-for-HPA1.txt", "delta": "0:00:00.059412", "end": "2019-10-12 13:24:59.108041", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:24:59.048629", "stderr": "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/aggregated-metrics-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-delegator.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-apiservice.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-service.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "stderr_lines": ["unable to recognize \"/home/kube/metrics-server/deploy/1.8+/aggregated-metrics-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-delegator.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-apiservice.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-service.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused"], "stdout": "", "stdout_lines": []}
2019-10-12 13:24:59,144 p=20088 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:24:59,144 p=20088 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:24:59,771 p=20144 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:24:59,779 p=20144 u=root |  TASK [get join command] *****************************************************************
2019-10-12 13:25:00,303 p=20144 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm token create --print-join-command", "delta": "0:00:00.041989", "end": "2019-10-12 13:25:00.268792", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:25:00.226803", "stderr": "failed to load admin kubeconfig: open /root/.kube/config: no such file or directory\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["failed to load admin kubeconfig: open /root/.kube/config: no such file or directory", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:25:00,306 p=20144 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:25:00,307 p=20144 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:25:00,945 p=20168 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:25:00,953 p=20168 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:25:02,895 p=20168 u=root |  changed: [master]
2019-10-12 13:25:02,902 p=20168 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:25:04,018 p=20168 u=root |  changed: [master]
2019-10-12 13:25:04,022 p=20168 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:25:04,023 p=20168 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:25:04,665 p=20208 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:25:04,674 p=20208 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 13:25:05,207 p=20208 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.055827", "end": "2019-10-12 13:25:05.167310", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:25:05.111483", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:25:05,548 p=20208 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.058352", "end": "2019-10-12 13:25:05.514708", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:25:05.456356", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:25:05,549 p=20208 u=root |  ...ignoring
2019-10-12 13:25:05,556 p=20208 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 13:25:05,916 p=20208 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.056276", "end": "2019-10-12 13:25:05.875681", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:25:05.819405", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:25:06,248 p=20208 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.054561", "end": "2019-10-12 13:25:06.215059", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:25:06.160498", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:25:06,249 p=20208 u=root |  ...ignoring
2019-10-12 13:25:06,253 p=20208 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:25:06,253 p=20208 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2019-10-12 13:26:55,632 p=20563 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:26:55,642 p=20563 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:26:55,682 p=20563 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:26:55,698 p=20563 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:26:55,728 p=20563 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:26:57,062 p=20563 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:26:57,068 p=20563 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:26:57,088 p=20563 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:26:57,125 p=20563 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:26:57,134 p=20563 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:26:58,480 p=20563 u=root |  ok: [master]
2019-10-12 13:26:58,718 p=20563 u=root |  ok: [worker2]
2019-10-12 13:26:58,907 p=20563 u=root |  ok: [worker1]
2019-10-12 13:26:58,914 p=20563 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:26:59,839 p=20563 u=root |  ok: [worker1]
2019-10-12 13:26:59,860 p=20563 u=root |  ok: [master]
2019-10-12 13:26:59,874 p=20563 u=root |  ok: [worker2]
2019-10-12 13:26:59,880 p=20563 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:27:02,371 p=20563 u=root |  ok: [worker1]
2019-10-12 13:27:02,425 p=20563 u=root |  ok: [worker2]
2019-10-12 13:27:02,553 p=20563 u=root |  ok: [master]
2019-10-12 13:27:02,560 p=20563 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:27:03,817 p=20563 u=root |  ok: [worker1]
2019-10-12 13:27:03,936 p=20563 u=root |  ok: [master]
2019-10-12 13:27:03,940 p=20563 u=root |  ok: [worker2]
2019-10-12 13:27:03,946 p=20563 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:27:04,640 p=20563 u=root |  ok: [worker1]
2019-10-12 13:27:04,723 p=20563 u=root |  ok: [master]
2019-10-12 13:27:04,779 p=20563 u=root |  ok: [worker2]
2019-10-12 13:27:04,785 p=20563 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:27:07,185 p=20563 u=root |  ok: [worker1]
2019-10-12 13:27:07,203 p=20563 u=root |  ok: [master]
2019-10-12 13:27:07,244 p=20563 u=root |  ok: [worker2]
2019-10-12 13:27:07,251 p=20563 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:27:08,412 p=20563 u=root |  ok: [worker1]
2019-10-12 13:27:08,495 p=20563 u=root |  ok: [worker2]
2019-10-12 13:27:08,502 p=20563 u=root |  ok: [master]
2019-10-12 13:27:08,510 p=20563 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:27:08,515 p=20563 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 13:27:09,560 p=20563 u=root |  ok: [master]
2019-10-12 13:27:09,562 p=20563 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:09,564 p=20563 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:09,564 p=20563 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:09,564 p=20563 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:10,218 p=20972 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:27:10,227 p=20972 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:27:10,984 p=20972 u=root |  ok: [worker2]
2019-10-12 13:27:10,988 p=20972 u=root |  ok: [worker1]
2019-10-12 13:27:10,992 p=20972 u=root |  ok: [master]
2019-10-12 13:27:10,998 p=20972 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 13:27:11,648 p=20972 u=root |  ok: [worker1]
2019-10-12 13:27:11,650 p=20972 u=root |  ok: [worker2]
2019-10-12 13:27:11,655 p=20972 u=root |  ok: [master]
2019-10-12 13:27:11,663 p=20972 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 13:27:12,505 p=20972 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:27:12,541 p=20972 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:27:12,543 p=20972 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:27:12,552 p=20972 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 13:27:13,213 p=20972 u=root |  ok: [master]
2019-10-12 13:27:13,216 p=20972 u=root |  ok: [worker2]
2019-10-12 13:27:13,218 p=20972 u=root |  ok: [worker1]
2019-10-12 13:27:13,224 p=20972 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:13,224 p=20972 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:13,224 p=20972 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:13,225 p=20972 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:13,859 p=21175 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:27:13,867 p=21175 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:27:14,387 p=21175 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.18 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570886833.88-261447153207651/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570886833.88-261447153207651/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570886833.88-261447153207651/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_c1sgfavt/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_c1sgfavt/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:27:14,387 p=21175 u=root |  ...ignoring
2019-10-12 13:27:14,394 p=21175 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 13:27:14,858 p=21175 u=root |  changed: [master]
2019-10-12 13:27:14,866 p=21175 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 13:27:15,320 p=21175 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /etc/kubernetes/admin.conf not found"}
2019-10-12 13:27:15,324 p=21175 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:15,325 p=21175 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 13:27:15,960 p=21229 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:27:15,969 p=21229 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:27:16,485 p=21229 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 13:27:16,485 p=21229 u=root |  ...ignoring
2019-10-12 13:27:16,491 p=21229 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 13:27:17,396 p=21229 u=root |  ok: [master]
2019-10-12 13:27:17,404 p=21229 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 13:27:17,861 p=21229 u=root |  ok: [master]
2019-10-12 13:27:17,866 p=21229 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:17,866 p=21229 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 13:27:18,503 p=21285 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:27:18,511 p=21285 u=root |  TASK [get join command] *****************************************************************
2019-10-12 13:27:19,021 p=21285 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm token create --print-join-command", "delta": "0:00:00.045354", "end": "2019-10-12 13:27:18.988827", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:27:18.943473", "stderr": "failed to load admin kubeconfig: open /root/.kube/config: no such file or directory\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["failed to load admin kubeconfig: open /root/.kube/config: no such file or directory", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:27:19,025 p=21285 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:19,025 p=21285 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:19,664 p=21309 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:27:19,672 p=21309 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:27:20,855 p=21309 u=root |  ok: [master]
2019-10-12 13:27:20,863 p=21309 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:27:21,960 p=21309 u=root |  changed: [master]
2019-10-12 13:27:21,964 p=21309 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:21,964 p=21309 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:27:22,612 p=21349 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:27:22,620 p=21349 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 13:27:23,146 p=21349 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.056384", "end": "2019-10-12 13:27:23.108867", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:27:23.052483", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:27:23,475 p=21349 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.054705", "end": "2019-10-12 13:27:23.445493", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:27:23.390788", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:27:23,476 p=21349 u=root |  ...ignoring
2019-10-12 13:27:23,484 p=21349 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 13:27:23,837 p=21349 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.052805", "end": "2019-10-12 13:27:23.799658", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:27:23.746853", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:27:24,157 p=21349 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.052822", "end": "2019-10-12 13:27:24.126249", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:27:24.073427", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:27:24,158 p=21349 u=root |  ...ignoring
2019-10-12 13:27:24,161 p=21349 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:27:24,161 p=21349 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2019-10-12 13:30:29,185 p=21735 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:30:29,193 p=21735 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:30:29,226 p=21735 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:30:29,250 p=21735 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:30:29,284 p=21735 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:30:30,664 p=21735 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:30:30,666 p=21735 u=root |  failed: [master] (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common']) => {"ansible_loop_var": "item", "cache_update_time": 1570886990, "cache_updated": false, "changed": false, "item": ["apt-transport-https", "ca-certificates", "gnupg2", "software-properties-common"], "msg": "'/usr/bin/apt-get -y -o \"Dpkg::Options::=--force-confdef\" -o \"Dpkg::Options::=--force-confold\"      install 'apt-transport-https' 'gnupg2'' failed: E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)\nE: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?\n", "rc": 100, "stderr": "E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)\nE: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?\n", "stderr_lines": ["E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)", "E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:30:30,748 p=21735 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:30:30,770 p=21735 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:30:30,780 p=21735 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:30:32,042 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:32,143 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:32,149 p=21735 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:30:32,988 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:33,007 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:33,015 p=21735 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:30:35,913 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:36,515 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:36,522 p=21735 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:30:37,689 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:37,793 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:37,800 p=21735 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:30:38,428 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:38,465 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:38,472 p=21735 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:30:40,796 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:41,151 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:41,157 p=21735 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:30:42,248 p=21735 u=root |  ok: [worker1]
2019-10-12 13:30:42,311 p=21735 u=root |  ok: [worker2]
2019-10-12 13:30:42,320 p=21735 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:30:42,322 p=21735 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:30:42,323 p=21735 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:30:42,323 p=21735 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:30:42,323 p=21735 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:30:42,953 p=22017 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:30:42,961 p=22017 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:30:43,614 p=22017 u=root |  ok: [worker1]
2019-10-12 13:30:43,631 p=22017 u=root |  ok: [worker2]
2019-10-12 13:30:48,258 p=22017 u=root |   [ERROR]: User interrupted execution

2019-10-12 13:31:24,023 p=22333 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:31:24,032 p=22333 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 13:31:24,067 p=22333 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:31:24,094 p=22333 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:31:24,130 p=22333 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 13:31:25,509 p=22333 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:31:25,514 p=22333 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 13:31:25,579 p=22333 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:31:29,372 p=22333 u=root |  changed: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 13:31:29,382 p=22333 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 13:31:30,738 p=22333 u=root |  ok: [worker1]
2019-10-12 13:31:30,807 p=22333 u=root |  ok: [worker2]
2019-10-12 13:31:30,919 p=22333 u=root |  changed: [master]
2019-10-12 13:31:30,926 p=22333 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 13:31:31,866 p=22333 u=root |  ok: [worker2]
2019-10-12 13:31:31,966 p=22333 u=root |  ok: [worker1]
2019-10-12 13:31:36,465 p=22333 u=root |  changed: [master]
2019-10-12 13:31:36,471 p=22333 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 13:31:38,856 p=22333 u=root |  ok: [worker1]
2019-10-12 13:31:39,064 p=22333 u=root |  ok: [worker2]
2019-10-12 13:31:57,422 p=22333 u=root |  changed: [master]
2019-10-12 13:31:57,429 p=22333 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 13:31:58,676 p=22333 u=root |  ok: [worker1]
2019-10-12 13:31:58,776 p=22333 u=root |  ok: [worker2]
2019-10-12 13:31:58,973 p=22333 u=root |  changed: [master]
2019-10-12 13:31:58,980 p=22333 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 13:31:59,685 p=22333 u=root |  ok: [worker1]
2019-10-12 13:31:59,734 p=22333 u=root |  ok: [worker2]
2019-10-12 13:32:04,870 p=22333 u=root |  changed: [master]
2019-10-12 13:32:04,877 p=22333 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 13:32:07,211 p=22333 u=root |  ok: [worker1]
2019-10-12 13:32:07,285 p=22333 u=root |  ok: [worker2]
2019-10-12 13:32:17,581 p=22333 u=root |  changed: [master]
2019-10-12 13:32:17,588 p=22333 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 13:32:18,763 p=22333 u=root |  ok: [worker1]
2019-10-12 13:32:18,811 p=22333 u=root |  ok: [worker2]
2019-10-12 13:32:26,854 p=22333 u=root |  changed: [master]
2019-10-12 13:32:26,864 p=22333 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:32:26,870 p=22333 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 13:32:27,868 p=22333 u=root |  ok: [master]
2019-10-12 13:32:27,872 p=22333 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:27,872 p=22333 u=root |  master                     : ok=9    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:27,872 p=22333 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:27,873 p=22333 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:28,508 p=22744 u=root |  PLAY [all] ******************************************************************************
2019-10-12 13:32:28,516 p=22744 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 13:32:29,235 p=22744 u=root |  ok: [worker1]
2019-10-12 13:32:29,245 p=22744 u=root |  ok: [worker2]
2019-10-12 13:32:29,388 p=22744 u=root |  changed: [master]
2019-10-12 13:32:29,395 p=22744 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 13:32:30,037 p=22744 u=root |  changed: [master]
2019-10-12 13:32:30,042 p=22744 u=root |  ok: [worker1]
2019-10-12 13:32:30,044 p=22744 u=root |  ok: [worker2]
2019-10-12 13:32:30,052 p=22744 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 13:32:30,893 p=22744 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:32:30,903 p=22744 u=root |  changed: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:32:30,923 p=22744 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 13:32:30,930 p=22744 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 13:32:31,585 p=22744 u=root |  ok: [worker1]
2019-10-12 13:32:31,590 p=22744 u=root |  ok: [worker2]
2019-10-12 13:32:31,592 p=22744 u=root |  changed: [master]
2019-10-12 13:32:31,596 p=22744 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:31,597 p=22744 u=root |  master                     : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:31,597 p=22744 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:31,597 p=22744 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:32,249 p=22944 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:32:32,258 p=22944 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 13:32:32,795 p=22944 u=root |  fatal: [master]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.200 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570887152.27-255794929410244/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570887152.27-255794929410244/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570887152.27-255794929410244/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_5cqz2syh/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_5cqz2syh/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 13:32:32,796 p=22944 u=root |  ...ignoring
2019-10-12 13:32:32,803 p=22944 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 13:32:33,285 p=22944 u=root |  changed: [master]
2019-10-12 13:32:33,293 p=22944 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 13:32:33,744 p=22944 u=root |  fatal: [master]: FAILED! => {"changed": false, "msg": "Source /etc/kubernetes/admin.conf not found"}
2019-10-12 13:32:33,748 p=22944 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:33,748 p=22944 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2019-10-12 13:32:34,387 p=22998 u=root |  PLAY [master] ***************************************************************************
2019-10-12 13:32:34,395 p=22998 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 13:32:39,367 p=22998 u=root |   [WARNING]: Module remote_tmp /home/kube/.ansible/tmp did not exist and was created with
a mode of 0700, this may cause issues when running as another user. To avoid this,
create the remote_tmp dir with the correct permissions manually

2019-10-12 13:32:39,368 p=22998 u=root |  changed: [master]
2019-10-12 13:32:39,375 p=22998 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 13:32:40,538 p=22998 u=root |  changed: [master]
2019-10-12 13:32:40,546 p=22998 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 13:32:41,055 p=22998 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubectl apply -f /home/kube/metrics-server/deploy/1.8+/ >> deploy-metrics-server-for-HPA1.txt", "delta": "0:00:00.061179", "end": "2019-10-12 13:32:41.018884", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:40.957705", "stderr": "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/aggregated-metrics-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-delegator.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-apiservice.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-service.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused\nunable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "stderr_lines": ["unable to recognize \"/home/kube/metrics-server/deploy/1.8+/aggregated-metrics-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-delegator.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/auth-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-apiservice.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-deployment.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/metrics-server-service.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused", "unable to recognize \"/home/kube/metrics-server/deploy/1.8+/resource-reader.yaml\": Get http://localhost:8080/api?timeout=32s: dial tcp 127.0.0.1:8080: connect: connection refused"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:41,059 p=22998 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:41,059 p=22998 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:41,696 p=23054 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:32:41,705 p=23054 u=root |  TASK [get join command] *****************************************************************
2019-10-12 13:32:42,208 p=23054 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm token create --print-join-command", "delta": "0:00:00.044146", "end": "2019-10-12 13:32:42.169351", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:42.125205", "stderr": "failed to load admin kubeconfig: open /root/.kube/config: no such file or directory\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["failed to load admin kubeconfig: open /root/.kube/config: no such file or directory", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:42,212 p=23054 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:42,212 p=23054 u=root |  master                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:42,849 p=23078 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:32:42,857 p=23078 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:32:44,810 p=23078 u=root |  changed: [master]
2019-10-12 13:32:44,817 p=23078 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 13:32:45,941 p=23078 u=root |  changed: [master]
2019-10-12 13:32:45,945 p=23078 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:45,945 p=23078 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 13:32:46,571 p=23118 u=root |  PLAY [masters] **************************************************************************
2019-10-12 13:32:46,579 p=23118 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 13:32:47,095 p=23118 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.055983", "end": "2019-10-12 13:32:47.053615", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:46.997632", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:47,413 p=23118 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.056165", "end": "2019-10-12 13:32:47.378071", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:47.321906", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:47,414 p=23118 u=root |  ...ignoring
2019-10-12 13:32:47,422 p=23118 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 13:32:47,770 p=23118 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.053931", "end": "2019-10-12 13:32:47.728017", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:47.674086", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:48,091 p=23118 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.054091", "end": "2019-10-12 13:32:48.056872", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 13:32:48.002781", "stderr": "The connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
2019-10-12 13:32:48,093 p=23118 u=root |  ...ignoring
2019-10-12 13:32:48,097 p=23118 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 13:32:48,098 p=23118 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2019-10-12 14:03:29,006 p=23476 u=root |  PLAY [all] ******************************************************************************
2019-10-12 14:03:29,014 p=23476 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 14:03:29,054 p=23476 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:03:29,072 p=23476 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:03:29,104 p=23476 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:03:30,452 p=23476 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:03:30,459 p=23476 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 14:03:30,464 p=23476 u=root |  ok: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:03:30,509 p=23476 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:03:30,518 p=23476 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 14:03:32,061 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:32,067 p=23476 u=root |  ok: [master]
2019-10-12 14:03:32,097 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:32,103 p=23476 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 14:03:33,037 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:33,039 p=23476 u=root |  ok: [master]
2019-10-12 14:03:33,047 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:33,053 p=23476 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 14:03:37,468 p=23476 u=root |  ok: [master]
2019-10-12 14:03:38,401 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:38,834 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:38,840 p=23476 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 14:03:40,208 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:40,224 p=23476 u=root |  ok: [master]
2019-10-12 14:03:40,297 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:40,304 p=23476 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 14:03:41,023 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:41,058 p=23476 u=root |  ok: [master]
2019-10-12 14:03:41,078 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:41,085 p=23476 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 14:03:43,686 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:43,761 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:43,815 p=23476 u=root |  ok: [master]
2019-10-12 14:03:43,823 p=23476 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 14:03:44,964 p=23476 u=root |  ok: [worker1]
2019-10-12 14:03:45,032 p=23476 u=root |  ok: [master]
2019-10-12 14:03:45,051 p=23476 u=root |  ok: [worker2]
2019-10-12 14:03:45,061 p=23476 u=root |  PLAY [master] ***************************************************************************
2019-10-12 14:03:45,067 p=23476 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 14:03:46,126 p=23476 u=root |  ok: [master]
2019-10-12 14:03:46,128 p=23476 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:03:46,129 p=23476 u=root |  master                     : ok=9    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:46,129 p=23476 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:46,130 p=23476 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:46,775 p=23885 u=root |  PLAY [all] ******************************************************************************
2019-10-12 14:03:46,784 p=23885 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 14:03:47,507 p=23885 u=root |  ok: [worker1]
2019-10-12 14:03:47,528 p=23885 u=root |  ok: [worker2]
2019-10-12 14:03:47,532 p=23885 u=root |  ok: [master]
2019-10-12 14:03:47,539 p=23885 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 14:03:48,183 p=23885 u=root |  ok: [worker1]
2019-10-12 14:03:48,185 p=23885 u=root |  ok: [worker2]
2019-10-12 14:03:48,190 p=23885 u=root |  ok: [master]
2019-10-12 14:03:48,198 p=23885 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 14:03:49,051 p=23885 u=root |  ok: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:03:49,072 p=23885 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:03:49,157 p=23885 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:03:49,165 p=23885 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 14:03:49,827 p=23885 u=root |  ok: [master]
2019-10-12 14:03:49,830 p=23885 u=root |  ok: [worker2]
2019-10-12 14:03:49,832 p=23885 u=root |  ok: [worker1]
2019-10-12 14:03:49,838 p=23885 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:03:49,838 p=23885 u=root |  master                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:49,839 p=23885 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:49,839 p=23885 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:50,479 p=24085 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:03:50,487 p=24085 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 14:03:51,999 p=24085 u=root |  fatal: [master]: FAILED! => {"changed": true, "cmd": "kubeadm init >> configure-master-node1.txt", "delta": "0:00:01.049573", "end": "2019-10-12 14:03:51.956745", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:03:50.907172", "stderr": "\t[WARNING IsDockerSystemdCheck]: detected \"cgroupfs\" as the Docker cgroup driver. The recommended driver is \"systemd\". Please follow the guide at https://kubernetes.io/docs/setup/cri/\n\t[WARNING SystemVerification]: this Docker version is not on the list of validated versions: 19.03.3. Latest validated version: 18.09\nerror execution phase preflight: [preflight] Some fatal errors occurred:\n\t[ERROR Port-6443]: Port 6443 is in use\n\t[ERROR Port-10251]: Port 10251 is in use\n\t[ERROR Port-10252]: Port 10252 is in use\n\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml]: /etc/kubernetes/manifests/kube-apiserver.yaml already exists\n\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml]: /etc/kubernetes/manifests/kube-controller-manager.yaml already exists\n\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml]: /etc/kubernetes/manifests/kube-scheduler.yaml already exists\n\t[ERROR FileAvailable--etc-kubernetes-manifests-etcd.yaml]: /etc/kubernetes/manifests/etcd.yaml already exists\n\t[ERROR Port-10250]: Port 10250 is in use\n\t[ERROR Port-2379]: Port 2379 is in use\n\t[ERROR Port-2380]: Port 2380 is in use\n\t[ERROR DirAvailable--var-lib-etcd]: /var/lib/etcd is not empty\n[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`\nTo see the stack trace of this error execute with --v=5 or higher", "stderr_lines": ["\t[WARNING IsDockerSystemdCheck]: detected \"cgroupfs\" as the Docker cgroup driver. The recommended driver is \"systemd\". Please follow the guide at https://kubernetes.io/docs/setup/cri/", "\t[WARNING SystemVerification]: this Docker version is not on the list of validated versions: 19.03.3. Latest validated version: 18.09", "error execution phase preflight: [preflight] Some fatal errors occurred:", "\t[ERROR Port-6443]: Port 6443 is in use", "\t[ERROR Port-10251]: Port 10251 is in use", "\t[ERROR Port-10252]: Port 10252 is in use", "\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml]: /etc/kubernetes/manifests/kube-apiserver.yaml already exists", "\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml]: /etc/kubernetes/manifests/kube-controller-manager.yaml already exists", "\t[ERROR FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml]: /etc/kubernetes/manifests/kube-scheduler.yaml already exists", "\t[ERROR FileAvailable--etc-kubernetes-manifests-etcd.yaml]: /etc/kubernetes/manifests/etcd.yaml already exists", "\t[ERROR Port-10250]: Port 10250 is in use", "\t[ERROR Port-2379]: Port 2379 is in use", "\t[ERROR Port-2380]: Port 2380 is in use", "\t[ERROR DirAvailable--var-lib-etcd]: /var/lib/etcd is not empty", "[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`", "To see the stack trace of this error execute with --v=5 or higher"], "stdout": "", "stdout_lines": []}
2019-10-12 14:03:52,000 p=24085 u=root |  ...ignoring
2019-10-12 14:03:52,007 p=24085 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 14:03:52,479 p=24085 u=root |  changed: [master]
2019-10-12 14:03:52,487 p=24085 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 14:03:52,940 p=24085 u=root |  changed: [master]
2019-10-12 14:03:52,948 p=24085 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 14:03:55,003 p=24085 u=root |  changed: [master]
2019-10-12 14:03:55,006 p=24085 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:03:55,007 p=24085 u=root |  master                     : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:03:55,648 p=24155 u=root |  PLAY [master] ***************************************************************************
2019-10-12 14:03:55,656 p=24155 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 14:03:56,165 p=24155 u=root |  fatal: [master]: FAILED! => {"before": "431f073591ba4a0dd340d4fa2388ab3d3752b53b", "changed": false, "msg": "Local modifications exist in repository (force=no)."}
2019-10-12 14:03:56,166 p=24155 u=root |  ...ignoring
2019-10-12 14:03:56,173 p=24155 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 14:03:57,327 p=24155 u=root |  ok: [master]
2019-10-12 14:03:57,334 p=24155 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 14:03:57,801 p=24155 u=root |  ok: [master]
2019-10-12 14:03:57,804 p=24155 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:03:57,805 p=24155 u=root |  master                     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:03:58,443 p=24211 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:03:58,451 p=24211 u=root |  TASK [get join command] *****************************************************************
2019-10-12 14:03:58,966 p=24211 u=root |  changed: [master]
2019-10-12 14:03:58,973 p=24211 u=root |  TASK [set join command] *****************************************************************
2019-10-12 14:03:58,994 p=24211 u=root |  ok: [master]
2019-10-12 14:03:59,003 p=24211 u=root |  PLAY [workers] **************************************************************************
2019-10-12 14:03:59,010 p=24211 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 14:03:59,472 p=24211 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.21 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.05-423877615300/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.05-423877615300/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.05-423877615300/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_t9m9a4xu/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_t9m9a4xu/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 14:03:59,472 p=24211 u=root |  ...ignoring
2019-10-12 14:03:59,489 p=24211 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.42 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.06-169893437147802/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.06-169893437147802/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889039.06-169893437147802/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_fonpvwq8/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_fonpvwq8/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 14:03:59,490 p=24211 u=root |  ...ignoring
2019-10-12 14:03:59,491 p=24211 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:03:59,492 p=24211 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:03:59,492 p=24211 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:03:59,492 p=24211 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:04:00,137 p=24270 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:04:00,145 p=24270 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 14:04:01,329 p=24270 u=root |  ok: [master]
2019-10-12 14:04:01,336 p=24270 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 14:04:02,461 p=24270 u=root |  changed: [master]
2019-10-12 14:04:02,465 p=24270 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:04:02,465 p=24270 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:04:03,110 p=24310 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:04:03,118 p=24310 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 14:04:03,779 p=24310 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.133296", "end": "2019-10-12 14:04:03.730239", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:04:03.596943", "stderr": "Error from server (NotFound): deployments.apps \"blue\" not found\nError from server (NotFound): services \"blue\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"blue\" not found", "Error from server (NotFound): services \"blue\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 14:04:04,263 p=24310 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.201591", "end": "2019-10-12 14:04:04.214424", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:04:04.012833", "stderr": "Error from server (NotFound): deployments.apps \"green\" not found\nError from server (NotFound): services \"green\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"green\" not found", "Error from server (NotFound): services \"green\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 14:04:04,264 p=24310 u=root |  ...ignoring
2019-10-12 14:04:04,270 p=24310 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 14:04:04,922 p=24310 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.314918", "end": "2019-10-12 14:04:04.866935", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:04:04.552017", "stderr": "The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/blue created\nhorizontalpodautoscaler.autoscaling/blue created", "stdout_lines": ["deployment.apps/blue created", "horizontalpodautoscaler.autoscaling/blue created"]}
2019-10-12 14:04:05,518 p=24310 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.197180", "end": "2019-10-12 14:04:05.462954", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:04:05.265774", "stderr": "The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/green created\nhorizontalpodautoscaler.autoscaling/green created", "stdout_lines": ["deployment.apps/green created", "horizontalpodautoscaler.autoscaling/green created"]}
2019-10-12 14:04:05,519 p=24310 u=root |  ...ignoring
2019-10-12 14:04:05,523 p=24310 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:04:05,524 p=24310 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2019-10-12 14:09:19,945 p=24725 u=root |  PLAY [all] ******************************************************************************
2019-10-12 14:09:19,953 p=24725 u=root |  TASK [install remote apt deps] **********************************************************
2019-10-12 14:09:19,986 p=24725 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:09:20,011 p=24725 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:09:20,046 p=24725 u=root |  [DEPRECATION WARNING]: Invoking "apt" only once while using a loop via squash_actions is
 deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ 
item }}"`, please use `name: ['apt-transport-https', 'ca-certificates', 'gnupg2', 
'software-properties-common']` and remove the loop. This feature will be removed in 
version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False
 in ansible.cfg.
2019-10-12 14:09:21,404 p=24725 u=root |  ok: [worker1] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:09:21,408 p=24725 u=root |   [WARNING]: Could not find aptitude. Using apt-get instead

2019-10-12 14:09:21,449 p=24725 u=root |  ok: [worker2] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:09:24,894 p=24725 u=root |  changed: [master] => (item=[u'apt-transport-https', u'ca-certificates', u'gnupg2', u'software-properties-common'])
2019-10-12 14:09:24,904 p=24725 u=root |  TASK [add Docker apt-key] ***************************************************************
2019-10-12 14:09:26,473 p=24725 u=root |  ok: [worker1]
2019-10-12 14:09:26,489 p=24725 u=root |  changed: [master]
2019-10-12 14:09:26,513 p=24725 u=root |  ok: [worker2]
2019-10-12 14:09:26,518 p=24725 u=root |  TASK [add Docker's APT repository] ******************************************************
2019-10-12 14:09:27,474 p=24725 u=root |  ok: [worker2]
2019-10-12 14:09:27,572 p=24725 u=root |  ok: [worker1]
2019-10-12 14:09:31,761 p=24725 u=root |  changed: [master]
2019-10-12 14:09:31,768 p=24725 u=root |  TASK [install Docker] *******************************************************************
2019-10-12 14:09:34,456 p=24725 u=root |  ok: [worker1]
2019-10-12 14:09:34,616 p=24725 u=root |  ok: [worker2]
2019-10-12 14:09:52,205 p=24725 u=root |  changed: [master]
2019-10-12 14:09:52,212 p=24725 u=root |  TASK [add Kubernetes apt-key] ***********************************************************
2019-10-12 14:09:53,453 p=24725 u=root |  ok: [worker1]
2019-10-12 14:09:53,589 p=24725 u=root |  ok: [worker2]
2019-10-12 14:09:53,608 p=24725 u=root |  changed: [master]
2019-10-12 14:09:53,616 p=24725 u=root |  TASK [add Kubernetes' APT repository] ***************************************************
2019-10-12 14:09:54,334 p=24725 u=root |  ok: [worker1]
2019-10-12 14:09:54,391 p=24725 u=root |  ok: [worker2]
2019-10-12 14:09:59,417 p=24725 u=root |  changed: [master]
2019-10-12 14:09:59,425 p=24725 u=root |  TASK [install kubelet] ******************************************************************
2019-10-12 14:10:01,930 p=24725 u=root |  ok: [worker1]
2019-10-12 14:10:02,051 p=24725 u=root |  ok: [worker2]
2019-10-12 14:10:12,608 p=24725 u=root |  changed: [master]
2019-10-12 14:10:12,616 p=24725 u=root |  TASK [install kubeadm] ******************************************************************
2019-10-12 14:10:13,815 p=24725 u=root |  ok: [worker1]
2019-10-12 14:10:13,851 p=24725 u=root |  ok: [worker2]
2019-10-12 14:10:22,449 p=24725 u=root |  changed: [master]
2019-10-12 14:10:22,458 p=24725 u=root |  PLAY [master] ***************************************************************************
2019-10-12 14:10:22,463 p=24725 u=root |  TASK [install kubectl] ******************************************************************
2019-10-12 14:10:23,469 p=24725 u=root |  ok: [master]
2019-10-12 14:10:23,471 p=24725 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:10:23,473 p=24725 u=root |  master                     : ok=9    changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:23,474 p=24725 u=root |  worker1                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:23,474 p=24725 u=root |  worker2                    : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:24,112 p=25134 u=root |  PLAY [all] ******************************************************************************
2019-10-12 14:10:24,120 p=25134 u=root |  TASK [create the 'kube' user] ***********************************************************
2019-10-12 14:10:24,836 p=25134 u=root |  ok: [worker1]
2019-10-12 14:10:24,842 p=25134 u=root |  ok: [worker2]
2019-10-12 14:10:24,978 p=25134 u=root |  changed: [master]
2019-10-12 14:10:24,985 p=25134 u=root |  TASK [allow 'kube' to have passwordless sudo] *******************************************
2019-10-12 14:10:25,638 p=25134 u=root |  ok: [worker1]
2019-10-12 14:10:25,642 p=25134 u=root |  ok: [worker2]
2019-10-12 14:10:25,644 p=25134 u=root |  changed: [master]
2019-10-12 14:10:25,653 p=25134 u=root |  TASK [set up authorized keys for the kube user] *****************************************
2019-10-12 14:10:26,487 p=25134 u=root |  changed: [master] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:10:26,492 p=25134 u=root |  ok: [worker1] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:10:26,513 p=25134 u=root |  ok: [worker2] => (item=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJOZXx5Y7H80rXUOBQG1xIk617tOciTHkxLnUhtbh01xT+QnbbyK30RQ5Xcm/3E9EnKi+384nTMPSy/wF8eZs58j4BCsLST/+QklAQsPJDLR7hdFxxMeV8L2FjWxZ0G2Ovt6WDoUap9ikLtL/Jfa1l2/rf5EuCJr7ZswNLssqP+CjnFW/H+g1GtvmW1CU/30m1lxeEv650FZiE9C/zrLtO2ueDHeowq/72dF2u6SOMBylEcN4dotn0BkDWI0gpqopRv0ID3Icczz82llKbCOEMAK/b+GEUIK5jOTEoFnaSGn5aPmw3d79gk8+y/9zsxvBhZ3BAqLgSlZzJFxHgAGFH root@ansible)
2019-10-12 14:10:26,520 p=25134 u=root |  TASK [Create a Directory /home/kube/logs] ***********************************************
2019-10-12 14:10:27,169 p=25134 u=root |  ok: [worker1]
2019-10-12 14:10:27,174 p=25134 u=root |  changed: [master]
2019-10-12 14:10:27,178 p=25134 u=root |  ok: [worker2]
2019-10-12 14:10:27,181 p=25134 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:10:27,181 p=25134 u=root |  master                     : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:27,182 p=25134 u=root |  worker1                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:27,182 p=25134 u=root |  worker2                    : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:10:27,805 p=25334 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:10:27,813 p=25334 u=root |  TASK [initialize the cluster] ***********************************************************
2019-10-12 14:11:23,653 p=25334 u=root |  changed: [master]
2019-10-12 14:11:23,660 p=25334 u=root |  TASK [create .kube directory] ***********************************************************
2019-10-12 14:11:24,132 p=25334 u=root |  changed: [master]
2019-10-12 14:11:24,140 p=25334 u=root |  TASK [copy admin.conf to user's kube config] ********************************************
2019-10-12 14:11:24,602 p=25334 u=root |  changed: [master]
2019-10-12 14:11:24,610 p=25334 u=root |  TASK [install Pod network] **************************************************************
2019-10-12 14:11:26,593 p=25334 u=root |   [WARNING]: Module remote_tmp /home/kube/.ansible/tmp did not exist and was created with
a mode of 0700, this may cause issues when running as another user. To avoid this,
create the remote_tmp dir with the correct permissions manually

2019-10-12 14:11:26,595 p=25334 u=root |  changed: [master]
2019-10-12 14:11:26,597 p=25334 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:11:26,597 p=25334 u=root |  master                     : ok=4    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:11:27,262 p=25404 u=root |  PLAY [master] ***************************************************************************
2019-10-12 14:11:27,270 p=25404 u=root |  TASK [download metrics-server from kubernetes-incubator] ********************************
2019-10-12 14:11:32,433 p=25404 u=root |  changed: [master]
2019-10-12 14:11:32,439 p=25404 u=root |  TASK [download metrics-server-deployment.yaml from my repo] *****************************
2019-10-12 14:11:33,654 p=25404 u=root |  changed: [master]
2019-10-12 14:11:33,661 p=25404 u=root |  TASK [Deploying Metrics-Server for HPA] *************************************************
2019-10-12 14:11:34,498 p=25404 u=root |  changed: [master]
2019-10-12 14:11:34,502 p=25404 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:11:34,502 p=25404 u=root |  master                     : ok=3    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:11:35,137 p=25460 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:11:35,145 p=25460 u=root |  TASK [get join command] *****************************************************************
2019-10-12 14:11:35,666 p=25460 u=root |  changed: [master]
2019-10-12 14:11:35,674 p=25460 u=root |  TASK [set join command] *****************************************************************
2019-10-12 14:11:35,694 p=25460 u=root |  ok: [master]
2019-10-12 14:11:35,704 p=25460 u=root |  PLAY [workers] **************************************************************************
2019-10-12 14:11:35,711 p=25460 u=root |  TASK [join cluster] *********************************************************************
2019-10-12 14:11:36,747 p=25460 u=root |  fatal: [worker1]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.21 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.75-168206102056444/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.75-168206102056444/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.75-168206102056444/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_kcuiy9co/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_kcuiy9co/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 14:11:36,747 p=25460 u=root |  ...ignoring
2019-10-12 14:11:36,820 p=25460 u=root |  fatal: [worker2]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.1.42 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.77-129898799823930/AnsiballZ_command.py\", line 114, in <module>\r\n    _ansiballz_main()\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.77-129898799823930/AnsiballZ_command.py\", line 106, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/root/.ansible/tmp/ansible-tmp-1570889495.77-129898799823930/AnsiballZ_command.py\", line 49, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/usr/lib/python3.6/imp.py\", line 235, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 170, in load_source\r\n    module = _exec(spec, sys.modules[name])\r\n  File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/tmp/ansible_command_payload_kpi1h11o/__main__.py\", line 327, in <module>\r\n  File \"/tmp/ansible_command_payload_kpi1h11o/__main__.py\", line 263, in main\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/logs'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2019-10-12 14:11:36,820 p=25460 u=root |  ...ignoring
2019-10-12 14:11:36,822 p=25460 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:11:36,823 p=25460 u=root |  master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:11:36,824 p=25460 u=root |  worker1                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:11:36,824 p=25460 u=root |  worker2                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2019-10-12 14:11:37,467 p=25525 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:11:37,475 p=25525 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 14:11:39,512 p=25525 u=root |  changed: [master]
2019-10-12 14:11:39,520 p=25525 u=root |  TASK [download blue green YAMLs from hiakki/kubernetes] *********************************
2019-10-12 14:11:40,680 p=25525 u=root |  changed: [master]
2019-10-12 14:11:40,684 p=25525 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:11:40,684 p=25525 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 14:11:41,324 p=25565 u=root |  PLAY [masters] **************************************************************************
2019-10-12 14:11:41,333 p=25565 u=root |  TASK [Deleting Deployment, Service, HPA of my_app] **************************************
2019-10-12 14:11:42,028 p=25565 u=root |  failed: [master] (item=blue) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"blue\"", "delta": "0:00:00.153427", "end": "2019-10-12 14:11:41.950299", "item": "blue", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:11:41.796872", "stderr": "Error from server (NotFound): deployments.apps \"blue\" not found\nError from server (NotFound): services \"blue\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"blue\" not found", "Error from server (NotFound): services \"blue\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"blue\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 14:11:42,439 p=25565 u=root |  failed: [master] (item=green) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl delete deploy,svc,hpa \"green\"", "delta": "0:00:00.135521", "end": "2019-10-12 14:11:42.386438", "item": "green", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:11:42.250917", "stderr": "Error from server (NotFound): deployments.apps \"green\" not found\nError from server (NotFound): services \"green\" not found\nError from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found", "stderr_lines": ["Error from server (NotFound): deployments.apps \"green\" not found", "Error from server (NotFound): services \"green\" not found", "Error from server (NotFound): horizontalpodautoscalers.autoscaling \"green\" not found"], "stdout": "", "stdout_lines": []}
2019-10-12 14:11:42,440 p=25565 u=root |  ...ignoring
2019-10-12 14:11:42,448 p=25565 u=root |  TASK [deploying HPA my_app] *************************************************************
2019-10-12 14:11:42,938 p=25565 u=root |  failed: [master] (item=/home/kube/kubernetes/blue/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/blue/\"", "delta": "0:00:00.194474", "end": "2019-10-12 14:11:42.881376", "item": "/home/kube/kubernetes/blue/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:11:42.686902", "stderr": "The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"blue\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/blue created\nhorizontalpodautoscaler.autoscaling/blue created", "stdout_lines": ["deployment.apps/blue created", "horizontalpodautoscaler.autoscaling/blue created"]}
2019-10-12 14:11:43,418 p=25565 u=root |  failed: [master] (item=/home/kube/kubernetes/green/) => {"ansible_loop_var": "item", "changed": true, "cmd": "kubectl create -f \"/home/kube/kubernetes/green/\"", "delta": "0:00:00.191843", "end": "2019-10-12 14:11:43.351228", "item": "/home/kube/kubernetes/green/", "msg": "non-zero return code", "rc": 1, "start": "2019-10-12 14:11:43.159385", "stderr": "The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)", "stderr_lines": ["The Service \"green\" is invalid: spec.externalIPs[0]: Invalid value: \"masterIP\": must be a valid IP address, (e.g. 10.9.8.7)"], "stdout": "deployment.apps/green created\nhorizontalpodautoscaler.autoscaling/green created", "stdout_lines": ["deployment.apps/green created", "horizontalpodautoscaler.autoscaling/green created"]}
2019-10-12 14:11:43,419 p=25565 u=root |  ...ignoring
2019-10-12 14:11:43,423 p=25565 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 14:11:43,423 p=25565 u=root |  master                     : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2019-10-12 15:58:10,220 p=31920 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 15:58:10,223 p=31920 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 15:58:10,232 p=31920 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 15:58:12,158 p=31920 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 15:58:12,161 p=31920 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 15:58:12,162 p=31920 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:00:07,892 p=32154 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:00:07,893 p=32154 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:00:07,903 p=32154 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:00:08,954 p=32154 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 127.0.0.1 closed.\r\n", "module_stdout": "\r\n/bin/sh: 1: /usr/local/lib/python2.7/dist-packages: Permission denied\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 126}
2019-10-12 16:00:08,957 p=32154 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:00:08,958 p=32154 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:00:32,322 p=32281 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:00:32,323 p=32281 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:00:32,333 p=32281 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:00:32,685 p=32281 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 127.0.0.1 closed.\r\n", "module_stdout": "\r\n/bin/sh: 1: /usr/local/lib/python2.7: Permission denied\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 126}
2019-10-12 16:00:32,688 p=32281 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:00:32,688 p=32281 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:00:46,432 p=32325 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:00:46,433 p=32325 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:00:46,442 p=32325 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:00:46,982 p=32325 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 16:00:46,985 p=32325 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:00:46,986 p=32325 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:07:53,172 p=32410 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:07:53,173 p=32410 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:07:53,182 p=32410 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:07:54,396 p=32410 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 16:07:54,399 p=32410 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:07:54,400 p=32410 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:10:28,108 p=32606 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:10:28,109 p=32606 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:10:28,118 p=32606 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:10:29,168 p=32606 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 127.0.0.1 closed.\r\n", "module_stdout": "\r\n/bin/sh: 1: /usr/local/lib/python2.7/dist-packages: Permission denied\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 126}
2019-10-12 16:10:29,172 p=32606 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:10:29,172 p=32606 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:11:58,975 p=32740 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:11:58,976 p=32740 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:11:58,985 p=32740 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:11:59,090 p=32740 u=root |  fatal: [localhost]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '[localhost]:21' (ECDSA) to the list of known hosts.\r\nroot@localhost: Permission denied (publickey,password).", "unreachable": true}
2019-10-12 16:11:59,093 p=32740 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:11:59,093 p=32740 u=root |  localhost                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 16:12:14,335 p=32755 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:12:14,336 p=32755 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:12:14,345 p=32755 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:12:14,450 p=32755 u=root |  fatal: [127.0.0.1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: root@127.0.0.1: Permission denied (publickey,password).", "unreachable": true}
2019-10-12 16:12:14,453 p=32755 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:12:14,453 p=32755 u=root |  127.0.0.1                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 16:13:34,983 p=406 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:13:34,984 p=406 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:13:34,993 p=406 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:13:35,099 p=406 u=root |  fatal: [127.0.0.1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: root@127.0.0.1: Permission denied (publickey,password).", "unreachable": true}
2019-10-12 16:13:35,102 p=406 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:13:35,102 p=406 u=root |  127.0.0.1                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 16:13:55,560 p=422 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:13:55,561 p=422 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:13:55,570 p=422 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:13:55,674 p=422 u=root |  fatal: [127.0.0.1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: root@127.0.0.1: Permission denied (publickey,password).", "unreachable": true}
2019-10-12 16:13:55,677 p=422 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:13:55,677 p=422 u=root |  127.0.0.1                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 16:14:22,107 p=442 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:14:22,108 p=442 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:14:22,117 p=442 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:14:50,195 p=442 u=root |  changed: [127.0.0.1]
2019-10-12 16:14:50,203 p=442 u=root |  TASK [launch-ec2-worker : Create an ec2 instance] ***************************************
2019-10-12 16:15:17,412 p=442 u=root |  changed: [127.0.0.1]
2019-10-12 16:15:17,415 p=442 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:15:17,416 p=442 u=root |  127.0.0.1                  : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2019-10-12 16:17:04,541 p=622 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:17:04,542 p=622 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:17:04,551 p=622 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:17:05,774 p=622 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 16:17:05,777 p=622 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:17:05,778 p=622 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:17:15,160 p=753 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:17:15,160 p=753 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:17:15,170 p=753 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:17:15,721 p=753 u=root |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 16:17:15,725 p=753 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:17:15,725 p=753 u=root |  localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:17:58,838 p=807 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:17:58,839 p=807 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:17:58,848 p=807 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:17:59,387 p=807 u=root |  fatal: [127.0.0.1]: FAILED! => {"changed": false, "msg": "boto required for this module"}
2019-10-12 16:17:59,390 p=807 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:17:59,391 p=807 u=root |  127.0.0.1                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:20:25,607 p=866 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:20:25,608 p=866 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:20:25,617 p=866 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:20:53,521 p=866 u=root |  changed: [127.0.0.1]
2019-10-12 16:20:53,530 p=866 u=root |  TASK [launch-ec2-master : Print IP of this Node] ****************************************
2019-10-12 16:20:53,552 p=866 u=root |  fatal: [127.0.0.1]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'ansible.utils.unsafe_proxy.AnsibleUnsafeText object' has no attribute 'public_ip'\n\nThe error appears to be in '/root/ansible/kubernetes_with_kubeadm/roles/launch-ec2-master/tasks/main.yml': line 20, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: Print IP of this Node\n      ^ here\n"}
2019-10-12 16:20:53,555 p=866 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:20:53,555 p=866 u=root |  127.0.0.1                  : ok=1    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:23:24,055 p=1020 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:23:24,056 p=1020 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:23:24,065 p=1020 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:23:46,856 p=1020 u=root |  changed: [127.0.0.1]
2019-10-12 16:23:46,865 p=1020 u=root |  TASK [launch-ec2-master : Print IP of this Node] ****************************************
2019-10-12 16:23:46,887 p=1020 u=root |  fatal: [127.0.0.1]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'ansible.utils.unsafe_proxy.AnsibleUnsafeText object' has no attribute 'public_ip'\n\nThe error appears to be in '/root/ansible/kubernetes_with_kubeadm/roles/launch-ec2-master/tasks/main.yml': line 20, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: Print IP of this Node\n      ^ here\n"}
2019-10-12 16:23:46,891 p=1020 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:23:46,891 p=1020 u=root |  127.0.0.1                  : ok=1    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:24:49,857 p=1153 u=root |  ERROR! Syntax Error while loading YAML.
  did not find expected <document start>

The error appears to be in '/root/ansible/kubernetes_with_kubeadm/roles/launch-ec2-master/tasks/main.yml': line 20, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- debug: msg="{{ ec2_metadata.instances }}"
^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2019-10-12 16:25:46,936 p=1159 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:25:46,937 p=1159 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:25:46,946 p=1159 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:26:04,736 p=1159 u=root |  changed: [127.0.0.1]
2019-10-12 16:26:04,745 p=1159 u=root |  TASK [launch-ec2-master : debug] ********************************************************
2019-10-12 16:26:04,772 p=1159 u=root |  ok: [127.0.0.1] => {
    "msg": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": true, 
                    "status": "attached", 
                    "volume_id": "vol-021608938f8c0831d"
                }
            }, 
            "dns_name": "ec2-13-235-114-153.ap-south-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-059e3a91e496bab98": "2_my_security_group"
            }, 
            "hypervisor": "xen", 
            "id": "i-06b17e1e87502fe82", 
            "image_id": "ami-0b91b718df755dd59", 
            "instance_type": "t2.medium", 
            "kernel": null, 
            "key_name": "my", 
            "launch_time": "2019-10-12T16:25:48.000Z", 
            "placement": "ap-south-1a", 
            "private_dns_name": "ip-192-168-1-120.ap-south-1.compute.internal", 
            "private_ip": "192.168.1.120", 
            "public_dns_name": "ec2-13-235-114-153.ap-south-1.compute.amazonaws.com", 
            "public_ip": "13.235.114.153", 
            "ramdisk": null, 
            "region": "ap-south-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "master"
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2019-10-12 16:26:04,780 p=1159 u=root |  TASK [launch-ec2-master : debug] ********************************************************
2019-10-12 16:26:04,798 p=1159 u=root |  fatal: [127.0.0.1]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'public_ip_address'\n\nThe error appears to be in '/root/ansible/kubernetes_with_kubeadm/roles/launch-ec2-master/tasks/main.yml': line 22, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - debug: msg=\"{{ ec2_metadata.instances[0].public_ip_address }}\"\n      ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2019-10-12 16:26:04,801 p=1159 u=root |  PLAY RECAP ******************************************************************************
2019-10-12 16:26:04,801 p=1159 u=root |  127.0.0.1                  : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2019-10-12 16:26:55,898 p=1294 u=root |   [WARNING]: Found variable using reserved name: name

2019-10-12 16:26:55,899 p=1294 u=root |  PLAY [localhost] ************************************************************************
2019-10-12 16:26:55,908 p=1294 u=root |  TASK [launch-ec2-master : Create an ec2 instance] ***************************************
2019-10-12 16:27:18,083 p=1294 u=root |  changed: [127.0.0.1]
2019-10-12 16:27:18,092 p=1294 u=root |  TASK [launch-ec2-master : debug] ********************************************************
2019-10-12 16:27:18,116 p=1294 u=root |  ok: [127.0.0.1] => {
    "msg": "13.232.104.199"
}
2019-10-12 16:27:18,123 p=1294 u=root |  TASK [launch-ec2-master : debug] ********************************************************
2019-10-12 16:27:18,148 p=1294 u=root |  ok: [127.0.0.1] => {
    "msg": "13.232.104.199"
}
2019-10-12 16:27:18,154 p=1294 u=root |  TASK [launch-ec2-worker : Create an ec2 instance] ***************************************
2019-10-12 16:27:44,658 p=1294 u=root |   [ERROR]: User interrupted execution

